[{"id":"6bc6a58f892d5f86","type":"tab","label":"Recovered Nodes","disabled":false,"info":"The nodes on this flow were missing a valid flow id when they were imported. They have been added to this flow so you can either restore or delete them.","env":[]},{"id":"6461f072.dc1338","type":"tab","label":"Deconz","disabled":false,"info":""},{"id":"36b23c0d.bf2cec","type":"tab","label":"Workshop","disabled":false,"info":""},{"id":"e8ebc87d.0e1fe8","type":"tab","label":"Global","disabled":false,"info":""},{"id":"94f6bb63.1811a8","type":"tab","label":"Kitchen","disabled":false,"info":""},{"id":"c79a5793.feeff8","type":"tab","label":"Lounge","disabled":false,"info":""},{"id":"81285515.4f20b","type":"tab","label":"Dashboard","disabled":false,"info":""},{"id":"aac72c62.ffcac","type":"subflow","name":"Subflow 1","info":"","in":[{"x":280,"y":160,"wires":[{"id":"f7020136.fce1e8"}]}],"out":[]},{"id":"49385e01.b3f238","type":"subflow","name":"Cube","info":"msg.event = \"Slide, Flip, 180 Flip, Double tap, Drop\"\nmsg.side","category":"","in":[{"x":60,"y":40,"wires":[{"id":"ace1b8e5.93c158"}]}],"out":[{"x":760,"y":100,"wires":[{"id":"ebb0c078.7c2708","port":0}]},{"x":760,"y":260,"wires":[{"id":"ace1b8e5.93c158","port":0}]}],"env":[]},{"id":"5cd102c5.e6257c","type":"subflow","name":"Vibration Sensor","info":"","category":"","in":[{"x":50,"y":30,"wires":[{"id":"8685a857.22371"}]}],"out":[{"x":800,"y":60,"wires":[{"id":"645448dc.4cbbf8","port":0}]},{"x":820,"y":180,"wires":[{"id":"63c2bef9.3bb31","port":1}]}],"env":[]},{"id":"5a42b34b.06243c","type":"subflow","name":"Bedroom Lights","info":"","category":"","in":[{"x":50,"y":30,"wires":[{"id":"88d2e991.a63698"},{"id":"cb83c19d.e843d"},{"id":"7d4e0e1f.6fe7f"}]}],"out":[{"x":560,"y":80,"wires":[{"id":"88d2e991.a63698","port":0},{"id":"cb83c19d.e843d","port":0},{"id":"7d4e0e1f.6fe7f","port":0}]}],"env":[]},{"id":"0f739382c3594a47","type":"subflow","name":"Toggle SMTSKT State w/ timeouts","info":"","category":"","in":[{"x":60,"y":120,"wires":[{"id":"b560b0cc50abd4a3"}]}],"out":[{"x":740,"y":120,"wires":[{"id":"2631514ffcb122ce","port":0}]}],"env":[{"name":"event_name","type":"str","value":"not supplied","ui":{"type":"input","opts":{"types":["str","env"]}}},{"name":"variation","type":"str","value":"20 minutes"},{"name":"timeout_seconds","type":"num","value":"10"}],"meta":{},"color":"#DDAA99","status":{"x":620,"y":260,"wires":[{"id":"2631514ffcb122ce","port":1}]}},{"id":"1587791.fcbfc07","type":"mqtt-broker","name":"MQTT","broker":"192.168.1.105","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"3fae961a.e0e002","type":"websocket-listener","path":"ws://192.168.1.105:8088","wholemsg":"false"},{"id":"c62ab10f.01fc5","type":"websocket-client","path":"ws://192.168.1.105:443","tls":"","wholemsg":"false"},{"id":"c91e92a4.14be78","type":"pushbullet-config","name":""},{"id":"d5f10d10.41d608","type":"websocket-listener","path":"http://192.168.1.105:80/api/E09E33DE20/lights","wholemsg":"false"},{"id":"c189a468.dd75a","type":"ui_tab","name":"Home","icon":"dashboard","order":""},{"id":"114d57a3.c0a97","type":"ui_group","name":"Otaghe e Liam","tab":"ffa368b9.ffa8d","disp":true,"width":"12","collapse":false},{"id":"d334b4b.ac7cbc8","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"1e457989.8585e6","type":"ui_group","name":"Workshop","tab":"ffa368b9.ffa8d","disp":true,"width":"10","collapse":false},{"id":"ffa368b9.ffa8d","type":"ui_tab","name":"Start","icon":"dashboard","disabled":false,"hidden":false},{"id":"f57f7c48.6fa358","type":"ui_group","name":"test","tab":"dcbe1ae7.456c3","order":3,"disp":true,"width":"7","collapse":true},{"id":"dcbe1ae7.456c3","type":"ui_tab","name":"test","icon":"fa-television","order":2},{"id":"3da98d5b.f5260a","type":"ui_group","name":"Lounge","tab":"ffa368b9.ffa8d","disp":true,"width":"12","collapse":false},{"id":"1413863b.baa24a","type":"mqtt-broker","broker":"192.168.24.2","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"dcfb116.92399f","type":"ui_group","name":"Default","tab":"db89d438.d66268","disp":true,"width":"6"},{"id":"4ea8322.ae0dacc","type":"mqtt-broker","broker":"192.168.24.2","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"db89d438.d66268","type":"ui_tab","name":"Home","icon":"dashboard","order":8},{"id":"f7020136.fce1e8","type":"function","z":"aac72c62.ffcac","name":"RELAY_ON","func":"var smtskt2sstate=flow.get('smtskt2sstate') || 0;\n\nif (smtskt2sstate === 0) {\n    msg.payload = \"$RELAY$ON\";\n    flow.set('smtskt2sstate', 1);\n}\nelse {\n    msg.payload = \"$RELAY$OFF\";\n    flow.set('smtskt2sstate', 0);\n}\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":160,"wires":[[]]},{"id":"87d529e3.272978","type":"switch","z":"49385e01.b3f238","name":"Cube","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":140,"wires":[["ebb0c078.7c2708"],[]]},{"id":"ebb0c078.7c2708","type":"function","z":"49385e01.b3f238","name":"Event (.event, .side)","func":"\nif (msg.payload.state === undefined || \n    msg.payload.state.buttonevent === undefined) {\n    return null;\n}\n\nvar event = msg.payload.state.buttonevent;\nvar side = Math.round(event/1000);\nvar modifier = event - (side * 1000);\nmsg.side = side;\n\nif (event % 1000 === 0) {\n    msg.event = \"slide\";\n}\nelse if (event === 7007) {\n    msg.event = \"shake\";\n}\nelse if (event === (side*1000) + side) {\n    msg.event = \"doubletap\";\n}\nelse if (side + modifier === 7) {\n    msg.event = \"180flip\";\n}\nelse if (side != 7 - modifier) {\n    msg.event = \"flip\";\n}\nelse if (event === 7008) {\n    msg.event = \"drop\";\n}\nelse {\n    msg.event = \"unknown (\" + event + \")\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":100,"wires":[[]]},{"id":"ace1b8e5.93c158","type":"json","z":"49385e01.b3f238","name":"","property":"payload","action":"","pretty":false,"x":210,"y":260,"wires":[["87d529e3.272978"]]},{"id":"b0d0faf6.91905","type":"comment","z":"49385e01.b3f238","name":"Links","info":"http://blog.smarterhome.club/2019/04/30/raspbee4/","x":470,"y":220,"wires":[]},{"id":"63c2bef9.3bb31","type":"switch","z":"5cd102c5.e6257c","name":"Vibration","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"9","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":100,"wires":[["645448dc.4cbbf8"],[]]},{"id":"645448dc.4cbbf8","type":"function","z":"5cd102c5.e6257c","name":"msg.strength","func":"if (msg.payload.state === undefined ||\n    msg.payload.state.vibration === undefined) {\n    return null;        \n}\n\nif (msg.payload.state.vibration === true) {\n    msg.strength = msg.payload.state.strength;\n    return msg;\n}\nreturn null;","outputs":1,"noerr":0,"x":530,"y":60,"wires":[[]]},{"id":"8685a857.22371","type":"json","z":"5cd102c5.e6257c","name":"","property":"payload","action":"","pretty":false,"x":210,"y":220,"wires":[["63c2bef9.3bb31"]]},{"id":"d0e4f693.b1f8a8","type":"comment","z":"5cd102c5.e6257c","name":"Links","info":"http://blog.smarterhome.club/2019/04/30/raspbee4/","x":470,"y":180,"wires":[]},{"id":"88d2e991.a63698","type":"http request","z":"5a42b34b.06243c","name":"Light 1 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/4/state","tls":"","proxy":"","authType":"","x":310,"y":100,"wires":[[]]},{"id":"cb83c19d.e843d","type":"http request","z":"5a42b34b.06243c","name":"Light 2 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/5/state","tls":"","proxy":"","authType":"","x":310,"y":160,"wires":[[]]},{"id":"7d4e0e1f.6fe7f","type":"http request","z":"5a42b34b.06243c","name":"Light 3 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/6/state","tls":"","proxy":"","authType":"","x":310,"y":220,"wires":[[]]},{"id":"b560b0cc50abd4a3","type":"function","z":"0f739382c3594a47","name":"","func":"var event_name = env.get(\"event_name\");\nvar timeout_seconds = env.get(\"timeout_seconds\");\nvar last_payload = context.get(event_name) || \"off\";\n\n// node.warn(event_name);\n\nvar payload = {\n    payload: \"on\",\n    timeout: timeout_seconds\n};\n\nvar is_plug_button = msg.payload \n    == \"EV_SPECFIC_TIME_REACHED\" || msg.payload \n    == \"EV_CLICKED\";\nvar is_motion = msg.payload.state != null &&\n    msg.payload.state.presence != null;\nvar is_deconz_button = msg.payload.state != null &&\n    msg.payload.state.buttonevent != null &&\n    msg.payload.state.buttonevent == \"1002\";\n\n// toggle\nif (is_plug_button || is_deconz_button || msg.payload == \"on\") {\n    payload.payload = last_payload == \"off\" ? \"on\" : \"off\";\n}\n// retrigger\nelse if (is_motion) {\n    payload.payload = \"on\";\n}\nelse {\n    return;\n}\n\ncontext.set(event_name, payload.payload); // store new payload state\n\nmsg.payload = payload;\n// node.warn(msg.payload);\n    \nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":120,"wires":[["2631514ffcb122ce"]]},{"id":"2631514ffcb122ce","type":"mytimeout","z":"0f739382c3594a47","name":"","outtopic":"","outsafe":"$LED$ON$RELAY$ON","outwarning":"","outunsafe":"$LED$OFF$RELAY$OFF","warning":"0","timer":"10800","debug":false,"ndebug":false,"ignoreCase":false,"repeat":false,"again":false,"x":430,"y":120,"wires":[[],[]]},{"id":"118d1e2e.31db22","type":"websocket in","z":"6461f072.dc1338","name":"","server":"","client":"c62ab10f.01fc5","x":140,"y":60,"wires":[["bbcaea0c.1d1878","20f92b84.9ee024"]]},{"id":"b4c98b96.3c6cb","type":"comment","z":"6461f072.dc1338","name":"https://github.com/dresden-elektronik/deconz-rest-plugin/issues/138#issuecomment-325101635","info":"https://github.com/dresden-elektronik/deconz-rest-plugin/issues/138#issuecomment-325101635","x":330,"y":1000,"wires":[]},{"id":"ef9a8b57.8f203","type":"mqtt out","z":"6461f072.dc1338","name":"","topic":"/device/cube1/event","qos":"","retain":"","broker":"1587791.fcbfc07","x":1020,"y":600,"wires":[]},{"id":"492643fa.e27d44","type":"mqtt out","z":"6461f072.dc1338","name":"","topic":"/device/aqara/vibration/door","qos":"","retain":"","broker":"1587791.fcbfc07","x":1020,"y":720,"wires":[]},{"id":"bbcaea0c.1d1878","type":"json","z":"6461f072.dc1338","name":"","property":"payload","action":"","pretty":false,"x":130,"y":680,"wires":[["b335a4b7.0d55c","11c333a8.4a2ec4","a924fde8.639168","28622a9d.091b0e","d891b018.842248","fe27e495.b1f758","170c0ac3.2f7865","13d7c8c.d7f3d37","27de5ec2.55eb12","f4751f5fbee34df9","4b2a4234862eec4f"]]},{"id":"b335a4b7.0d55c","type":"switch","z":"6461f072.dc1338","name":"Cube1","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"9","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":600,"wires":[["4993ed64.3b02b4"]]},{"id":"11c333a8.4a2ec4","type":"switch","z":"6461f072.dc1338","name":"Vibration Front Door","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"9","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":460,"y":700,"wires":[["492643fa.e27d44"]]},{"id":"a924fde8.639168","type":"switch","z":"6461f072.dc1338","name":"Vibration Other","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"10","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":440,"y":740,"wires":[[],[]]},{"id":"d891b018.842248","type":"switch","z":"6461f072.dc1338","name":"Lights","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"4","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"eq","v":"6","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":770,"y":1020,"wires":[[],[],[],[],[]]},{"id":"f5d433dc.00d1a","type":"mqtt out","z":"6461f072.dc1338","name":"","topic":"/device/aqara/motion/kitchen","qos":"","retain":"","broker":"1587791.fcbfc07","x":1360,"y":360,"wires":[]},{"id":"8fe37628.12ef28","type":"function","z":"6461f072.dc1338","name":"ON","func":"if (msg.payload.state !== undefined && msg.payload.state.presence) {\n    msg.payload = \"on\";\n    return msg;\n}\nreturn null;","outputs":1,"noerr":0,"x":770,"y":400,"wires":[["77dd6cb3c61e8cb0","f5d433dc.00d1a"]]},{"id":"4993ed64.3b02b4","type":"function","z":"6461f072.dc1338","name":"Event (.event, .side)","func":"\nif (msg.payload.state === undefined || \n    msg.payload.state.buttonevent === undefined) {\n    return null;\n}\n\nvar event = msg.payload.state.buttonevent;\nvar side = Math.round(event/1000);\nvar modifier = event - (side * 1000);\n\nif (event % 1000 === 0) {\n    msg.payload.event = \"slide\";\n}\nelse if (event === 7007) {\n    msg.payload.event = \"shake\";\n}\nelse if (event === (side*1000) + side) {\n    msg.payload.event = \"doubletap\";\n}\nelse if (side + modifier === 7) {\n    msg.payload.event = \"180flip\";\n}\nelse if (side != 7 - modifier) {\n    msg.payload.event = \"flip\";\n}\nelse if (event === 7008) {\n    msg.payload.event = \"drop\";\n}\nelse {\n    msg.payload.event = \"unknown (\" + event + \")\";\n}\nmsg.payload.side = side;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":600,"wires":[["ef9a8b57.8f203"]]},{"id":"28622a9d.091b0e","type":"switch","z":"6461f072.dc1338","name":"Temperature 42","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"42","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":940,"wires":[["3445ea61.07df36","795bcaaf5f1f0cdb"]]},{"id":"20f92b84.9ee024","type":"debug","z":"6461f072.dc1338","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":60,"wires":[]},{"id":"b2a040e3.03cf78","type":"http request","z":"6461f072.dc1338","name":"Request new API Key from Deconz","method":"POST","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api","tls":"","proxy":"","authType":"","x":400,"y":1180,"wires":[["e88738c9.516d7"]]},{"id":"8167212e.b5cfa8","type":"inject","z":"6461f072.dc1338","name":"Headers for API Key","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{ \"devicetype\": \"nodered\" }","payloadType":"str","x":130,"y":1180,"wires":[["b2a040e3.03cf78"]]},{"id":"e88738c9.516d7","type":"json","z":"6461f072.dc1338","name":"","property":"payload","action":"","pretty":false,"x":710,"y":1180,"wires":[[]]},{"id":"cf0d093.59246f8","type":"comment","z":"6461f072.dc1338","name":"http://dresden-elektronik.github.io/deconz-rest-doc/getting_started/","info":"","x":280,"y":1220,"wires":[]},{"id":"ddc9534e.7f19e8","type":"http request","z":"6461f072.dc1338","name":"Get lights","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights","tls":"","proxy":"","authType":"","x":480,"y":1380,"wires":[["2f8435fa.eef8ca"]]},{"id":"26fabda9.d9a8ca","type":"inject","z":"6461f072.dc1338","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":1380,"wires":[["ddc9534e.7f19e8"]]},{"id":"c0ac5ef1.2b84d8","type":"debug","z":"6461f072.dc1338","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":840,"y":1380,"wires":[]},{"id":"2f8435fa.eef8ca","type":"json","z":"6461f072.dc1338","name":"","property":"payload","action":"","pretty":false,"x":680,"y":1380,"wires":[["c0ac5ef1.2b84d8"]]},{"id":"e94bbb5f.ba8ed8","type":"http request","z":"6461f072.dc1338","name":"Get light 4","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/4","tls":"","proxy":"","authType":"","x":490,"y":1420,"wires":[["2f8435fa.eef8ca"]]},{"id":"b7c17c84.1158c8","type":"inject","z":"6461f072.dc1338","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":1420,"wires":[["e94bbb5f.ba8ed8"]]},{"id":"964749dd.171d9","type":"http request","z":"6461f072.dc1338","name":"Put Light 4","method":"PUT","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/5/state","tls":"","proxy":"","authType":"","x":490,"y":1460,"wires":[["2f8435fa.eef8ca"]]},{"id":"9da8ae8e.b4d8e8","type":"inject","z":"6461f072.dc1338","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"LIght OFF","payload":"{\"on\":true,\"bri\":180,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":250,"y":1460,"wires":[["964749dd.171d9"]]},{"id":"9e7b950e.55e588","type":"http request","z":"6461f072.dc1338","name":"Get Groups","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/groups","tls":"","proxy":"","authType":"","x":470,"y":1520,"wires":[["2f8435fa.eef8ca"]]},{"id":"d228d3e0.0a0f6","type":"inject","z":"6461f072.dc1338","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"Groups","payload":"","payloadType":"str","x":280,"y":1520,"wires":[["9e7b950e.55e588"]]},{"id":"82a5df6.1f3702","type":"http request","z":"6461f072.dc1338","name":"","method":"PUT","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/groups/2/action","tls":"","proxy":"","authType":"","x":470,"y":1580,"wires":[["2f8435fa.eef8ca"]]},{"id":"3c5dc06f.7518d8","type":"inject","z":"6461f072.dc1338","name":"Groups - ON","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":true,\"bri\":255,\"transitiontime\":10}","payloadType":"json","x":290,"y":1580,"wires":[["82a5df6.1f3702"]]},{"id":"57ee2aca.ba501c","type":"inject","z":"6461f072.dc1338","name":"Groups - OFF","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":false,\"bri\":255,\"transitiontime\":10}","payloadType":"json","x":290,"y":1620,"wires":[["82a5df6.1f3702"]]},{"id":"ca900a61.48d0a8","type":"http request","z":"6461f072.dc1338","name":"Get sensors","method":"GET","ret":"txt","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/sensors","tls":"","proxy":"","authType":"","x":490,"y":1280,"wires":[["e073b436.609c9"]]},{"id":"5169b335.91fafc","type":"inject","z":"6461f072.dc1338","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":1280,"wires":[["ca900a61.48d0a8"]]},{"id":"b968181c.cd69e8","type":"debug","z":"6461f072.dc1338","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":840,"y":1280,"wires":[]},{"id":"e073b436.609c9","type":"json","z":"6461f072.dc1338","name":"","property":"payload","action":"","pretty":false,"x":680,"y":1280,"wires":[["b968181c.cd69e8"]]},{"id":"fe27e495.b1f758","type":"switch","z":"6461f072.dc1338","name":"Cube2","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"34","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":560,"wires":[["baab9cde.07c038"]]},{"id":"baab9cde.07c038","type":"function","z":"6461f072.dc1338","name":"Event (.event, .side)","func":"\nif (msg.payload.state === undefined || \n    msg.payload.state.buttonevent === undefined) {\n    return null;\n}\n\nvar event = msg.payload.state.buttonevent;\nvar side = Math.round(event/1000);\nvar modifier = event - (side * 1000);\n\nif (event % 1000 === 0) {\n    msg.payload.event = \"slide\";\n}\nelse if (event === 7007) {\n    msg.payload.event = \"shake\";\n}\nelse if (event === (side*1000) + side) {\n    msg.payload.event = \"doubletap\";\n}\nelse if (side + modifier === 7) {\n    msg.payload.event = \"180flip\";\n}\nelse if (side != 7 - modifier) {\n    msg.payload.event = \"flip\";\n}\nelse if (event === 7008) {\n    msg.payload.event = \"drop\";\n}\nelse {\n    msg.payload.event = \"unknown (\" + event + \")\";\n}\nmsg.payload.side = side;\nreturn msg;","outputs":1,"noerr":0,"x":600,"y":560,"wires":[["3f61d679.6e11d2"]]},{"id":"3f61d679.6e11d2","type":"mqtt out","z":"6461f072.dc1338","name":"","topic":"/device/cube2/event","qos":"","retain":"","broker":"1587791.fcbfc07","x":1020,"y":560,"wires":[]},{"id":"170c0ac3.2f7865","type":"function","z":"6461f072.dc1338","name":"Cave Lights","func":"\nswitch (msg.payload.id)\n{\n    case \"10\":\n    case\"11\":\n    case \"12\":\n        return msg;\n    default:\n        return null;\n}","outputs":1,"noerr":0,"x":310,"y":1060,"wires":[["d5a4d47f.f11b9"]]},{"id":"d5a4d47f.f11b9","type":"link out","z":"6461f072.dc1338","name":"Cave LIghts","links":["71c66eac.2ef66"],"x":435,"y":1060,"wires":[]},{"id":"a3e03d2.704bf4","type":"link out","z":"6461f072.dc1338","name":"Temp 36","links":["6be464e5.a5c93c"],"x":615,"y":860,"wires":[]},{"id":"3445ea61.07df36","type":"link out","z":"6461f072.dc1338","name":"Temp 42","links":["eeecf549.3c0a9"],"x":615,"y":940,"wires":[]},{"id":"98c74e64.f4d898","type":"link out","z":"6461f072.dc1338","name":"Temp 39","links":["ed524b9e.a63bd8"],"x":615,"y":900,"wires":[]},{"id":"6f3a5619.fa78","type":"link out","z":"6461f072.dc1338","name":"Button 25","mode":"link","links":[],"x":1095,"y":200,"wires":[]},{"id":"17658b61.8e34ed","type":"link out","z":"6461f072.dc1338","name":"Button 32","mode":"link","links":["eee118685fe6bc63"],"x":1095,"y":280,"wires":[]},{"id":"41ac6cf1.374464","type":"link out","z":"6461f072.dc1338","name":"Button 33","links":[],"x":1095,"y":320,"wires":[]},{"id":"13d7c8c.d7f3d37","type":"switch","z":"6461f072.dc1338","name":"Temperature 17","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"17","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":780,"wires":[["5e4eb67d.732e2","795bcaaf5f1f0cdb"]]},{"id":"5e4eb67d.732e2","type":"link out","z":"6461f072.dc1338","name":"Temp 17","links":["3f16b738.ec7f2"],"x":615,"y":780,"wires":[],"icon":"font-awesome/fa-thermometer-0"},{"id":"27de5ec2.55eb12","type":"switch","z":"6461f072.dc1338","name":"Temperature 14","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"14","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":820,"wires":[["a0d27751.9cde28","795bcaaf5f1f0cdb"]]},{"id":"a0d27751.9cde28","type":"link out","z":"6461f072.dc1338","name":"Temp 14","links":["4b28afe4.e0cc9","8ead97a0.4860e"],"x":615,"y":820,"wires":[],"icon":"font-awesome/fa-thermometer-0"},{"id":"3858d3ce.cf6b7c","type":"switch","z":"6461f072.dc1338","name":"Temperature 39","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"39","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":900,"wires":[["98c74e64.f4d898","795bcaaf5f1f0cdb"]]},{"id":"321762c9.e04136","type":"switch","z":"6461f072.dc1338","name":"Temperature 36","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"36","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":860,"wires":[["a3e03d2.704bf4","795bcaaf5f1f0cdb"]]},{"id":"f4751f5fbee34df9","type":"switch","z":"6461f072.dc1338","name":"Buttons","property":"payload.state.buttonevent","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":360,"y":280,"wires":[["25fb4b91ac4557ab"]]},{"id":"cc9dbb68237e225b","type":"debug","z":"6461f072.dc1338","name":"Otherwise","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":740,"y":340,"wires":[]},{"id":"c923fb94a4ec27ff","type":"link out","z":"6461f072.dc1338","name":"Button 31","mode":"link","links":[],"x":1095,"y":240,"wires":[]},{"id":"795bcaaf5f1f0cdb","type":"debug","z":"6461f072.dc1338","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":790,"y":840,"wires":[]},{"id":"25fb4b91ac4557ab","type":"switch","z":"6461f072.dc1338","name":"Button Ids","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"33","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":540,"y":280,"wires":[["6f3a5619.fa78"],["c923fb94a4ec27ff"],["17658b61.8e34ed"],["41ac6cf1.374464"],["cc9dbb68237e225b"]]},{"id":"4b2a4234862eec4f","type":"switch","z":"6461f072.dc1338","name":"Motion","property":"payload.state.presence","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":420,"wires":[["9c9388790bfdbd46"]]},{"id":"9c9388790bfdbd46","type":"switch","z":"6461f072.dc1338","name":"Motion Ids","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":550,"y":420,"wires":[["8fe37628.12ef28"],["e58d5eea3c89e3a5"],["2f3a90d683056c9a"]]},{"id":"e58d5eea3c89e3a5","type":"link out","z":"6461f072.dc1338","name":"Motion Cave","mode":"link","links":["efa1aa2937936c75"],"x":895,"y":440,"wires":[]},{"id":"77dd6cb3c61e8cb0","type":"link out","z":"6461f072.dc1338","name":"Motion Kitchen","mode":"link","links":[],"x":895,"y":400,"wires":[]},{"id":"2f3a90d683056c9a","type":"debug","z":"6461f072.dc1338","name":"Otherwise","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":780,"y":480,"wires":[]},{"id":"7720d9a.f0197a8","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_DOWN/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":220,"y":840,"wires":[[]]},{"id":"8a51465b.a13588","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_LEFT/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":210,"y":880,"wires":[[]]},{"id":"b20b3bc5.71bb68","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_RIGHT/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":220,"y":800,"wires":[[]]},{"id":"36daac85.8fa87c","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_FIRE/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":210,"y":720,"wires":[[]]},{"id":"7535e75d.62a778","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"/general/jar-light/command","qos":"","retain":"","broker":"1587791.fcbfc07","x":500,"y":1680,"wires":[]},{"id":"98036bf6.95f72","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"COUNTDOWN$60","payloadType":"str","x":130,"y":1760,"wires":[["7535e75d.62a778"]]},{"id":"b236b4e9.d03da","type":"debug","z":"36b23c0d.bf2cec","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":460,"y":1800,"wires":[]},{"id":"1f849955.92da67","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/general/jar-light/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":120,"y":1800,"wires":[["b236b4e9.d03da"]]},{"id":"d664522.1b39fb","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"pc/heartbeat","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":90,"y":1380,"wires":[["19179eda.262f91","1c103518.86411b"]]},{"id":"19179eda.262f91","type":"trigger","z":"36b23c0d.bf2cec","name":"heartbeat timeout","op1":"ON","op2":"OFF","op1type":"str","op2type":"str","duration":"35","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":470,"y":1380,"wires":[["5da9895a.9b1f48"]]},{"id":"1ba92a7f.b51e86","type":"debug","z":"36b23c0d.bf2cec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":870,"y":1280,"wires":[]},{"id":"4d3cbd49.267194","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"pc/status/on","qos":"","retain":"","broker":"1587791.fcbfc07","x":990,"y":1360,"wires":[]},{"id":"5da9895a.9b1f48","type":"switch","z":"36b23c0d.bf2cec","name":"ON/OFF","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"ON","vt":"str"},{"t":"eq","v":"OFF","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":740,"y":1380,"wires":[["4d3cbd49.267194"],["335629c4.f4b0b6"]]},{"id":"335629c4.f4b0b6","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"pc/status/off","qos":"","retain":"","broker":"1587791.fcbfc07","x":990,"y":1420,"wires":[]},{"id":"d6e29c2e.bcdb98","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT05/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":170,"y":1220,"wires":[[]]},{"id":"3ef8166e.5390a2","type":"comment","z":"36b23c0d.bf2cec","name":"PC power","info":"","x":80,"y":1180,"wires":[]},{"id":"173193cc.bb3a9c","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"pc/status/+","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":90,"y":1280,"wires":[["6e2021dc.caae2"]]},{"id":"39c45949.61c006","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"ON","payloadType":"str","x":550,"y":1480,"wires":[["5da9895a.9b1f48"]]},{"id":"6e2021dc.caae2","type":"function","z":"36b23c0d.bf2cec","name":"/device/smartsocket/SMTSKT05/command","func":"msg.topic = \"/device/smartsocket/SMTSKT05/command\";\nmsg.payload = \"$\" + msg.payload;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":1280,"wires":[["1ba92a7f.b51e86","8f44e173.28a6e","a295b1b.e22c3d"]]},{"id":"8f44e173.28a6e","type":"function","z":"36b23c0d.bf2cec","name":"LED Command","func":"\nmsg.payload = \"$LED\" + msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1300,"y":1180,"wires":[["d5b67b4e.cfe27"]]},{"id":"d5b67b4e.cfe27","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"","qos":"","retain":"","broker":"1587791.fcbfc07","x":1530,"y":1200,"wires":[]},{"id":"a295b1b.e22c3d","type":"function","z":"36b23c0d.bf2cec","name":"RELAY Command","func":"\nmsg.payload = \"$RELAY\" + msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":1220,"wires":[["d5b67b4e.cfe27"]]},{"id":"8589e6a7.65cd28","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"OFF","payloadType":"str","x":550,"y":1520,"wires":[["5da9895a.9b1f48"]]},{"id":"1c103518.86411b","type":"link out","z":"36b23c0d.bf2cec","name":"PC Heartbeat","links":["61898600.7ed75c"],"x":335,"y":1320,"wires":[]},{"id":"ff4e6f42.32b44","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":180,"y":1320,"wires":[["1c103518.86411b"]]},{"id":"d6c98070.a59a98","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BRIGHTNESS$50","payloadType":"str","x":130,"y":1720,"wires":[["7535e75d.62a778"]]},{"id":"869aec70.59058","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"OFF$50","payloadType":"str","x":100,"y":1640,"wires":[["7535e75d.62a778"]]},{"id":"71a3883c.c061c","type":"inject","z":"36b23c0d.bf2cec","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"PERIOD$1","payloadType":"str","x":100,"y":1680,"wires":[["7535e75d.62a778"]]},{"id":"2225882d.64a47","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/online","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":160,"y":680,"wires":[["3b55cca6.6c2224"]]},{"id":"3b55cca6.6c2224","type":"debug","z":"36b23c0d.bf2cec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":690,"y":680,"wires":[]},{"id":"c582f81cbaf5df38","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_UP/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":310,"y":320,"wires":[["81a06d761073a79d"]]},{"id":"e74bb5d978a34598","type":"debug","z":"36b23c0d.bf2cec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1050,"y":100,"wires":[]},{"id":"294753593c7b1cf8","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT05/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"1587791.fcbfc07","x":1130,"y":220,"wires":[]},{"id":"9bacf7b5ec973c12","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT05/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","nl":false,"rap":true,"rh":0,"inputs":0,"x":310,"y":180,"wires":[["d4fd421293d83356"]]},{"id":"d4fd421293d83356","type":"subflow:0f739382c3594a47","z":"36b23c0d.bf2cec","name":"PC Top LIght","env":[{"name":"event_name","value":"ATARI_JOYSTICK_UP","type":"str"},{"name":"variation","value":"1 minutes","type":"str"}],"x":610,"y":220,"wires":[["e74bb5d978a34598","294753593c7b1cf8"]]},{"id":"8f9b0e402535df6b","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_LEFT/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":310,"y":220,"wires":[["d4fd421293d83356"]]},{"id":"0f715a7adb492e74","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT02/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","nl":false,"rap":true,"rh":0,"inputs":0,"x":310,"y":280,"wires":[["81a06d761073a79d"]]},{"id":"81a06d761073a79d","type":"subflow:0f739382c3594a47","z":"36b23c0d.bf2cec","name":"PC Monitor Under Light","env":[{"name":"event_name","value":"ATARI_JOYSTICK_UP","type":"str"},{"name":"variation","value":"1 minutes","type":"str"}],"x":650,"y":280,"wires":[["3fe31a706ae33790","e74bb5d978a34598"]]},{"id":"3fe31a706ae33790","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT02/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"1587791.fcbfc07","x":1130,"y":280,"wires":[]},{"id":"eee118685fe6bc63","type":"link in","z":"36b23c0d.bf2cec","name":"Button 32","links":["17658b61.8e34ed"],"x":285,"y":500,"wires":[["3b16fa61e065c9c8"]],"icon":"node-red-contrib-deconz/icon-color.png"},{"id":"2ae80e5386d52682","type":"subflow:0f739382c3594a47","z":"36b23c0d.bf2cec","name":"WARDROBE_LIGHT","env":[{"name":"event_name","value":"WARDROBE_LIGHT","type":"str"},{"name":"variation","value":"1 minutes","type":"str"},{"name":"timeout_seconds","value":"60","type":"num"}],"x":640,"y":400,"wires":[["7a7be386fef41236","213f731c72155583"]]},{"id":"7a7be386fef41236","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT07/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"1587791.fcbfc07","x":1130,"y":400,"wires":[]},{"id":"cd3aefae59d8bf54","type":"mqtt out","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT01/command","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"1587791.fcbfc07","x":1130,"y":480,"wires":[]},{"id":"2419b56d79ac94b6","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atom-lite-1/button","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","nl":false,"rap":false,"inputs":0,"x":270,"y":400,"wires":[["2ae80e5386d52682"]]},{"id":"3b16fa61e065c9c8","type":"subflow:0f739382c3594a47","z":"36b23c0d.bf2cec","name":"WORKBENCH_LIGHT","env":[{"name":"event_name","value":"WORKBENCH_LIGHT","type":"str"},{"name":"timeout_seconds","value":"0","type":"num"}],"x":640,"y":480,"wires":[["cd3aefae59d8bf54"]]},{"id":"957b6e20bfa43c42","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/atari-stick/BUTTON_UP/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":210,"y":760,"wires":[[]]},{"id":"efa1aa2937936c75","type":"link in","z":"36b23c0d.bf2cec","name":"Motion Cave","links":["e58d5eea3c89e3a5"],"x":285,"y":460,"wires":[["2ae80e5386d52682","74e74d6709b42d3d"]],"icon":"node-red-contrib-deconz/icon-color.png"},{"id":"c29a3a35447b365e","type":"mqtt in","z":"36b23c0d.bf2cec","name":"","topic":"/device/smartsocket/SMTSKT07/online","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","nl":false,"rap":true,"rh":0,"inputs":0,"x":230,"y":1020,"wires":[["d5ca33c8ef3d98c7"]]},{"id":"d5ca33c8ef3d98c7","type":"trigger","z":"36b23c0d.bf2cec","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"500","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":500,"y":1020,"wires":[[]]},{"id":"74e74d6709b42d3d","type":"debug","z":"36b23c0d.bf2cec","name":"From Sensor","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":590,"y":560,"wires":[]},{"id":"213f731c72155583","type":"debug","z":"36b23c0d.bf2cec","name":"Subflow output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":920,"y":540,"wires":[]},{"id":"615a5a439ac96641","type":"inject","z":"36b23c0d.bf2cec","name":"Motion","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"state\":{\"presence\":\"motion\"}}","payloadType":"json","x":550,"y":340,"wires":[["2ae80e5386d52682"]]},{"id":"aabb5468.30ea6","type":"mqtt out","z":"e8ebc87d.0e1fe8","name":"","topic":"/dev/timestamp","qos":"","retain":"","broker":"1587791.fcbfc07","x":500,"y":80,"wires":[]},{"id":"f35f639c.2d73b8","type":"inject","z":"e8ebc87d.0e1fe8","name":"1 Second","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":80,"wires":[["aabb5468.30ea6"]]},{"id":"bfeb767d.53f45","type":"mqtt out","z":"e8ebc87d.0e1fe8","name":"/nodered/time10s","topic":"/nodered/time10s","qos":"","retain":"","broker":"1587791.fcbfc07","x":510,"y":220,"wires":[]},{"id":"19298ddf.0c5f5a","type":"inject","z":"e8ebc87d.0e1fe8","name":"10 Second","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":220,"wires":[["bfeb767d.53f45"]]},{"id":"ad4e6036.66068","type":"mqtt in","z":"94f6bb63.1811a8","name":"","topic":"/device/smartsocket/SMTSKT05/event","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":190,"y":280,"wires":[["4cb3b10.65b125"]]},{"id":"91f32b09.0c416","type":"mqtt in","z":"94f6bb63.1811a8","name":"","topic":"/kitchen/bench-lights/online","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":160,"y":400,"wires":[["c048b89b.f67538"]]},{"id":"c048b89b.f67538","type":"trigger","z":"94f6bb63.1811a8","name":"Online","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"1000","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":450,"y":400,"wires":[[]]},{"id":"aba6a0c1.23b6e8","type":"mqtt in","z":"94f6bb63.1811a8","name":"","topic":"/device/smartsocket/SMTSKT05/online","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":190,"y":220,"wires":[["28107b5c.02f48c"]]},{"id":"28107b5c.02f48c","type":"trigger","z":"94f6bb63.1811a8","name":"Online","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"1000","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":450,"y":220,"wires":[[]]},{"id":"1ab14664.93501a","type":"comment","z":"94f6bb63.1811a8","name":"KITCHEN BENCH LIGHT","info":"","x":150,"y":180,"wires":[]},{"id":"4cb3b10.65b125","type":"function","z":"94f6bb63.1811a8","name":"BOOT","func":"if (msg.payload === \"BOOT\") {\n    msg.payload = \"$RELAY$ON\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":260,"wires":[["be2a3e99.b5991"]]},{"id":"be2a3e99.b5991","type":"mqtt out","z":"94f6bb63.1811a8","name":"","topic":"/device/smartsocket/SMTSKT05/command","qos":"","retain":"","broker":"1587791.fcbfc07","x":1130,"y":260,"wires":[]},{"id":"92205485.9a0f7","type":"mqtt out","z":"94f6bb63.1811a8","name":"","topic":"","qos":"","retain":"","broker":"1587791.fcbfc07","x":860,"y":180,"wires":[]},{"id":"e3a384d7.d98828","type":"inject","z":"94f6bb63.1811a8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"/device/smartsocket/SMTSKT05/event","payload":"EV_RELEASED","payloadType":"str","x":620,"y":180,"wires":[["92205485.9a0f7"]]},{"id":"fe36b486.888dd8","type":"mqtt in","z":"94f6bb63.1811a8","name":"","topic":"/device/aqara/motion/kitchen","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":160,"y":520,"wires":[["2d44d288.9fd2c6"]]},{"id":"2d44d288.9fd2c6","type":"trigger","z":"94f6bb63.1811a8","name":"","op1":"$LED_ALL$ON","op2":"$LED_ALL$OFF","op1type":"str","op2type":"str","duration":"5","extend":true,"units":"min","reset":"","bytopic":"all","outputs":1,"x":420,"y":520,"wires":[["c6c7ed7c.e7a44","907123d6.f9d6a"]]},{"id":"907123d6.f9d6a","type":"debug","z":"94f6bb63.1811a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":650,"y":440,"wires":[]},{"id":"c6c7ed7c.e7a44","type":"mqtt out","z":"94f6bb63.1811a8","name":"","topic":"/kitchen/bench-lights/command","qos":"","retain":"","broker":"1587791.fcbfc07","x":1370,"y":520,"wires":[]},{"id":"d30786d0.042bc8","type":"mqtt in","z":"94f6bb63.1811a8","name":"","topic":"/device/aqara/coffee_machine_button/held","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":200,"y":620,"wires":[["9b76472f.8e1b5"]]},{"id":"f9df1df4.e5d9e","type":"mqtt in","z":"94f6bb63.1811a8","name":"","topic":"/device/aqara/coffee_machine_button/tap","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":200,"y":720,"wires":[["3a42752e.1c6e0a"]]},{"id":"d965b6ef.b09f1","type":"trigger","z":"94f6bb63.1811a8","name":"","op1":"","op2":"START_BLINKING","op1type":"nul","op2type":"str","duration":"22","extend":true,"units":"s","reset":"$OFF","bytopic":"all","outputs":1,"x":710,"y":680,"wires":[["9c6142fe.c8efd"]]},{"id":"9c6142fe.c8efd","type":"function","z":"94f6bb63.1811a8","name":"startBlink","func":"var BLINKDELAY = 1000;\n\nvar light = true;\n\n\nvar blinker = setInterval(blink, BLINKDELAY);\n\nglobal.set(\"blinker\", blinker);\n\nfunction blink () {\n    \n    if (light) {\n        msg.payload = 1;\n        light = false;\n    }\n    \n    else {\n        msg.payload = 0;\n        light = true;\n    }\n    \n    node.send(msg);\n}\n\n\nreturn;","outputs":1,"noerr":0,"x":860,"y":680,"wires":[["bf3d6ce9.01aa"]]},{"id":"3a42752e.1c6e0a","type":"function","z":"94f6bb63.1811a8","name":"stopBlink","func":"clearInterval(global.get(\"blinker\"));\n\nmsg.payload = 0;\n\nreturn msg;","outputs":1,"noerr":0,"x":860,"y":720,"wires":[["bf3d6ce9.01aa"]]},{"id":"6556f5d0.c6d894","type":"function","z":"94f6bb63.1811a8","name":"Flash Once","func":"var BLINKDELAY = 250;\n\nvar light = true;\n\nvar blinker = setInterval(blink, BLINKDELAY);\n\nglobal.set(\"blinker\", blinker);\n\nfunction blink () {\n    \n    if (light) {\n        msg.payload = 1;\n        light = false;\n    }\n    \n    else {\n        msg.payload = 0;\n        light = true;\n        clearInterval(global.get(\"blinker\"));\n    }\n    \n    node.send(msg);\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":620,"wires":[["d965b6ef.b09f1","bf3d6ce9.01aa"]]},{"id":"9b76472f.8e1b5","type":"function","z":"94f6bb63.1811a8","name":"$LED_ALL$ON","func":"msg.payload = \"$LED_ALL$ON\";\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":620,"wires":[["6556f5d0.c6d894"]]},{"id":"bf3d6ce9.01aa","type":"function","z":"94f6bb63.1811a8","name":"to $LED_ALL","func":"if (msg.payload === 0 || msg.payload === \"$LED_ALL$ON\") {\n    msg.payload = \"$LED_ALL$ON\";\n}\nelse {\n    msg.payload = \"$LED_ALL$OFF\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":1080,"y":620,"wires":[["20e093f3.2d0a5c","65043e8c.bb8f48"]]},{"id":"20e093f3.2d0a5c","type":"debug","z":"94f6bb63.1811a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1310,"y":740,"wires":[]},{"id":"65043e8c.bb8f48","type":"mqtt out","z":"94f6bb63.1811a8","name":"","topic":"/kitchen/bench-lights/command","qos":"","retain":"","broker":"1587791.fcbfc07","x":1370,"y":620,"wires":[]},{"id":"b463c96.481e038","type":"mqtt out","z":"94f6bb63.1811a8","name":"","topic":"/general/test-jar-light/command","qos":"","retain":"","broker":"1587791.fcbfc07","x":1417,"y":365,"wires":[]},{"id":"5dc4d27b.c280a4","type":"inject","z":"94f6bb63.1811a8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"$LED_SOMETHING$SOMETHING","payloadType":"str","x":1030,"y":360,"wires":[["b463c96.481e038"]]},{"id":"2e525468.9a4ad4","type":"http request","z":"c79a5793.feeff8","name":"Light above me State (1)","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/1/state","tls":"","proxy":"","authType":"","x":430,"y":40,"wires":[[]]},{"id":"b0234eb1.13f5e","type":"http request","z":"c79a5793.feeff8","name":"Light 2 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/2/state","tls":"","proxy":"","authType":"","x":390,"y":100,"wires":[[]]},{"id":"abc1cf6d.071d7","type":"http request","z":"c79a5793.feeff8","name":"Light 3 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/3/state","tls":"","proxy":"","authType":"","x":390,"y":160,"wires":[[]]},{"id":"374f430d.e8e2e4","type":"inject","z":"c79a5793.feeff8","name":"OFF","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":false,\"bri\":255,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":110,"y":100,"wires":[["2e525468.9a4ad4","b0234eb1.13f5e","abc1cf6d.071d7","c535ced9.dba458","e37e6fc.c968b9"]]},{"id":"2d14336c.81b104","type":"inject","z":"c79a5793.feeff8","name":"ON","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":true,\"bri\":255,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":110,"y":140,"wires":[["2e525468.9a4ad4","b0234eb1.13f5e","abc1cf6d.071d7","c535ced9.dba458","e37e6fc.c968b9"]]},{"id":"c535ced9.dba458","type":"http request","z":"c79a5793.feeff8","name":"Light 7 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/7/state","tls":"","proxy":"","authType":"","x":390,"y":220,"wires":[[]]},{"id":"e37e6fc.c968b9","type":"http request","z":"c79a5793.feeff8","name":"Light above Leila 8 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/8/state","tls":"","proxy":"","authType":"","x":430,"y":280,"wires":[[]]},{"id":"b675324a.e1065","type":"mqtt in","z":"c79a5793.feeff8","name":"","topic":"/device/aqara/lounge-button/tap","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":150,"y":380,"wires":[["c38f868e.9f9d2"]]},{"id":"6754d317.42f2a4","type":"mqtt in","z":"c79a5793.feeff8","name":"","topic":"/device/aqara/lounge-button/doubletap","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":170,"y":420,"wires":[[]]},{"id":"a88ce21c.fac48","type":"mqtt in","z":"c79a5793.feeff8","name":"","topic":"/device/aqara/lounge-button/tripletap","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":170,"y":460,"wires":[[]]},{"id":"8c8bd6a4.d68d6","type":"mqtt in","z":"c79a5793.feeff8","name":"","topic":"/device/aqara/lounge-button/quadtap","qos":"2","datatype":"auto","broker":"1587791.fcbfc07","inputs":0,"x":170,"y":500,"wires":[[]]},{"id":"4f3dfa18.d2fd64","type":"http request","z":"c79a5793.feeff8","name":"","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/{{id}}/state","tls":"","proxy":"","authType":"","x":890,"y":380,"wires":[["d90bdc4c.ec0eb"]]},{"id":"d90bdc4c.ec0eb","type":"debug","z":"c79a5793.feeff8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1060,"y":380,"wires":[]},{"id":"b1b95ac.5bfeca8","type":"function","z":"c79a5793.feeff8","name":"All (state)","func":"var light1 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 1\n};\nvar light2 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 2\n};\nvar light3 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 3\n};\nvar light4 = {\n    payload: {\n        \"on\":msg.state,\n        \"bri\":255,\n        \"hue\":43680,\n        \"sat\":255,\n        \"transitiontime\":10\n    },\n    id: 7\n};\n// var light5 = {\n//     payload: {\n//         \"on\":msg.state,\n//         \"bri\":255,\n//         \"hue\":43680,\n//         \"sat\":255,\n//         \"transitiontime\":10\n//     },\n//     id: 8\n// };\nreturn [[light1, light2, light3, light4]];\n\n","outputs":1,"noerr":0,"x":640,"y":380,"wires":[["4f3dfa18.d2fd64"]]},{"id":"c38f868e.9f9d2","type":"function","z":"c79a5793.feeff8","name":"Change Scene","func":"var lounge_lights_scene = \"lounge_lights_scene\";\nvar current_scene = flow.get(lounge_lights_scene);\nvar leila_light_msg = { payload: msg.payload, state: false };\n\nswitch (current_scene) {\n    case \"on\":\n        flow.set(lounge_lights_scene, \"leila_only\");\n        msg.state = false;\n        leila_light_msg.state = false;\n        break;\n    case \"leila_only\":\n        flow.set(lounge_lights_scene, \"off\");\n        leila_light_msg.state = true;\n        msg.state = false;\n        break;\n    case \"off\":\n        flow.set(lounge_lights_scene, \"on\");\n        leila_light_msg.state = true;\n        msg.state = true;\n        break;\n    default:\n        flow.set(lounge_lights_scene, \"on\");\n        leila_light_msg.state = true;\n        msg.state = true;\n        break;\n}\nreturn [msg, leila_light_msg];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":380,"wires":[["b1b95ac.5bfeca8"],["1b757707.b515b1"]]},{"id":"715db3a0.f7a024","type":"mqtt in","z":"c79a5793.feeff8","name":"/device/cube1/event","topic":"/device/cube1/event","qos":"2","datatype":"json","broker":"1587791.fcbfc07","inputs":0,"x":710,"y":40,"wires":[["550e2b.cc87b9d4"]]},{"id":"632e8eca.8b9648","type":"mqtt in","z":"c79a5793.feeff8","name":"","topic":"/device/motion/door/event","qos":"2","datatype":"json","broker":"1587791.fcbfc07","inputs":0,"x":130,"y":760,"wires":[[]]},{"id":"5edf7daa.430774","type":"inject","z":"c79a5793.feeff8","name":"Initialise","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":520,"y":540,"wires":[[]]},{"id":"1b757707.b515b1","type":"function","z":"c79a5793.feeff8","name":"Leila Light","func":"msg.payload = {\n    \"on\":msg.state,\n    \"bri\":255,\n    \"hue\":43680,\n    \"sat\":255,\n    \"transitiontime\":10\n};\nmsg.id = 8;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":420,"wires":[["4f3dfa18.d2fd64"]]},{"id":"1d5698df.5f6867","type":"inject","z":"c79a5793.feeff8","name":"ON","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\":true,\"bri\":255,\"hue\":43680,\"sat\":255,\"transitiontime\":10}","payloadType":"json","x":110,"y":140,"wires":[[]]},{"id":"550e2b.cc87b9d4","type":"function","z":"c79a5793.feeff8","name":"shake","func":"if (msg.payload.event !== \"shake\") {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":40,"wires":[["4c8cb3cf.05ec14","b92fdb0c.d92268"]]},{"id":"4c8cb3cf.05ec14","type":"delay","z":"c79a5793.feeff8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1020,"y":120,"wires":[["c20410e1.ee09c"]]},{"id":"b6229d75.886a68","type":"http request","z":"c79a5793.feeff8","name":"Light above me State (1)","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/1/state","tls":"","proxy":"","authType":"","x":1410,"y":40,"wires":[[]]},{"id":"f41762e6.c72a1","type":"http request","z":"c79a5793.feeff8","name":"Light 2 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/2/state","tls":"","proxy":"","authType":"","x":1370,"y":100,"wires":[[]]},{"id":"7a8182eb.5c5294","type":"http request","z":"c79a5793.feeff8","name":"Light 3 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/3/state","tls":"","proxy":"","authType":"","x":1370,"y":160,"wires":[[]]},{"id":"126d275.1c21b59","type":"http request","z":"c79a5793.feeff8","name":"Light 7 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/7/state","tls":"","proxy":"","authType":"","x":1370,"y":220,"wires":[[]]},{"id":"124d0b3b.ede935","type":"http request","z":"c79a5793.feeff8","name":"Light above Leila 8 State","method":"PUT","ret":"obj","paytoqs":false,"url":"http://192.168.1.105:80/api/7665109987/lights/8/state","tls":"","proxy":"","authType":"","x":1410,"y":280,"wires":[[]]},{"id":"c20410e1.ee09c","type":"function","z":"c79a5793.feeff8","name":"ON","func":"msg.payload = \"{\\\"on\\\":true,\\\"bri\\\":255,\\\"hue\\\":43680,\\\"sat\\\":255,\\\"transitiontime\\\":10}\";\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":240,"wires":[["124d0b3b.ede935","126d275.1c21b59"]]},{"id":"b92fdb0c.d92268","type":"function","z":"c79a5793.feeff8","name":"OFF","func":"msg.payload = \"{\\\"on\\\":false,\\\"bri\\\":255,\\\"hue\\\":43680,\\\"sat\\\":255,\\\"transitiontime\\\":10}\";\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":40,"wires":[["b6229d75.886a68","f41762e6.c72a1","7a8182eb.5c5294","126d275.1c21b59","124d0b3b.ede935"]]},{"id":"fbf4bc19.dec738","type":"ui_text","z":"81285515.4f20b","group":"114d57a3.c0a97","order":0,"width":0,"height":0,"name":"","label":"Liam's Room","format":"{{msg.payload.state.temperature/100}} &deg;","layout":"row-spread","x":1130,"y":440,"wires":[]},{"id":"4ac461a.90773a","type":"ui_chart","z":"81285515.4f20b","name":"","group":"114d57a3.c0a97","order":2,"width":"12","height":"7","label":"Liam's Room Temperatures","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"12","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#ff8040","#ff0000","#0000ff","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1180,"y":540,"wires":[[]]},{"id":"65de59c.eb462a8","type":"function","z":"81285515.4f20b","name":"to degs","func":"if (msg.payload.state === undefined)\n{\n    return null;\n}\nmsg.payload = msg.payload.state.temperature/100;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":540,"wires":[["4ac461a.90773a"]]},{"id":"3bdd3028.8db64","type":"ui_text","z":"81285515.4f20b","group":"1e457989.8585e6","order":0,"width":0,"height":0,"name":"","label":"Liam's Heater","format":"{{msg.payload.state.temperature/100}} &deg;","layout":"row-spread","x":1140,"y":480,"wires":[]},{"id":"d3cfc07c.3d66e8","type":"change","z":"81285515.4f20b","name":"topic:  Liam's Room","rules":[{"t":"set","p":"topic","pt":"msg","to":" Liam's Room","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":440,"wires":[["fbf4bc19.dec738","65de59c.eb462a8"]]},{"id":"67782521.4d3704","type":"change","z":"81285515.4f20b","name":"topic: Liam's Heater","rules":[{"t":"set","p":"topic","pt":"msg","to":"Liam's Heater","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":480,"wires":[["3bdd3028.8db64","65de59c.eb462a8"]]},{"id":"d31e49bd.45ea08","type":"change","z":"81285515.4f20b","name":"topic: Heatpump","rules":[{"t":"set","p":"topic","pt":"msg","to":"Heatpump","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":340,"wires":[["a132ef04.86f4f","8c23b27d.001f7"]]},{"id":"3f16b738.ec7f2","type":"link in","z":"81285515.4f20b","name":"Outside","links":["5e4eb67d.732e2"],"x":435,"y":200,"wires":[["5ade5ac6.3673bc"]],"outputLabels":["Outside Temp"]},{"id":"8ead97a0.4860e","type":"link in","z":"81285515.4f20b","name":"Liam's Room Temp","links":["a0d27751.9cde28"],"x":435,"y":440,"wires":[["d3cfc07c.3d66e8"]]},{"id":"6be464e5.a5c93c","type":"link in","z":"81285515.4f20b","name":"Leila","links":["a3e03d2.704bf4"],"x":410,"y":300,"wires":[["de93d81a.b28a5"]],"l":true},{"id":"ed524b9e.a63bd8","type":"link in","z":"81285515.4f20b","name":"","links":["98c74e64.f4d898"],"x":435,"y":480,"wires":[["67782521.4d3704"]]},{"id":"eeecf549.3c0a9","type":"link in","z":"81285515.4f20b","name":"Heatpump","links":["3445ea61.07df36"],"x":400,"y":340,"wires":[["d31e49bd.45ea08"]],"l":true},{"id":"a132ef04.86f4f","type":"function","z":"81285515.4f20b","name":"to degs","func":"if (msg.payload.state === undefined)\n{\n    return null;\n}\nmsg.payload = msg.payload.state.temperature/100;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":260,"wires":[["2518f31b.366954"]]},{"id":"2518f31b.366954","type":"ui_chart","z":"81285515.4f20b","name":"","group":"114d57a3.c0a97","order":2,"width":"12","height":"7","label":"Lounge Room Temperatures","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"12","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#ff0000","#ff8000","#ff80ff","#0000ff","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1180,"y":260,"wires":[[]]},{"id":"de57516b.fee6a","type":"ui_gauge","z":"81285515.4f20b","name":"Outside","group":"3da98d5b.f5260a","order":6,"width":"3","height":"3","gtype":"gage","title":"Outside","label":"units","format":"{{msg.payload.state.temperature/100}}","min":0,"max":"25","colors":["#75baff","#e6e600","#ff8000"],"seg1":"10","seg2":"15","x":1120,"y":200,"wires":[]},{"id":"34daed88.9681aa","type":"ui_template","z":"81285515.4f20b","group":"1e457989.8585e6","name":"","order":7,"width":"3","height":"3","format":"<div ng-bind-html=\"msg.payload\">{{msg.payload.state.temperature/100}} &deg;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":200,"wires":[["de57516b.fee6a"]]},{"id":"d40889ab.48df7","type":"debug","z":"81285515.4f20b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":100,"wires":[]},{"id":"8c23b27d.001f7","type":"ui_gauge","z":"81285515.4f20b","name":"Heatpump","group":"3da98d5b.f5260a","order":6,"width":"3","height":"3","gtype":"gage","title":"Heatpump","label":"units","format":"{{msg.payload.state.temperature/100}}","min":"10","max":"40","colors":["#75baff","#e6e600","#ff8000"],"seg1":"20","seg2":"30","x":1130,"y":340,"wires":[]},{"id":"5ade5ac6.3673bc","type":"function","z":"81285515.4f20b","name":"topic: Outside","func":"if (msg.payload.state === undefined)\n    return null;\n\nmsg.topic = \"Outside\";\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":200,"wires":[["d40889ab.48df7","34daed88.9681aa","a132ef04.86f4f","65de59c.eb462a8"]]},{"id":"de93d81a.b28a5","type":"function","z":"81285515.4f20b","name":"topic: Leila","func":"if (msg.payload.state === undefined)\n    return null;\n\nmsg.topic = \"Leila\";\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":300,"wires":[["a132ef04.86f4f","825d1e3e.12b71"]]},{"id":"825d1e3e.12b71","type":"ui_gauge","z":"81285515.4f20b","name":"Leila","group":"3da98d5b.f5260a","order":6,"width":"3","height":"3","gtype":"gage","title":"Leila","label":"units","format":"{{msg.payload.state.temperature/100}}","min":"10","max":"25","colors":["#75baff","#e6e600","#ff0000"],"seg1":"15","seg2":"20","x":1110,"y":300,"wires":[]}]
